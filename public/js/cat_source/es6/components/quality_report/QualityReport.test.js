import {createRoot} from 'react-dom/client'
import {act, screen, waitFor} from '@testing-library/react'
import {http, HttpResponse} from 'msw'

import {mswServer} from '../../../../../mocks/mswServer'

jest.setTimeout(30000)
global.config = {
  basepath: 'http://localhost/',
  enableMultiDomainApi: false,
  id_job: 123,
  password: '184031c05e34',
  searchable_statuses: [
    {
      value: 'NEW',
      label: 'NEW',
    },
    {
      value: 'DRAFT',
      label: 'DRAFT',
    },
    {
      value: 'TRANSLATED',
      label: 'TRANSLATED',
    },
    {
      value: 'APPROVED',
      label: 'APPROVED',
    },
    {
      value: 'REJECTED',
      label: 'REJECTED',
    },
  ],
}
test('renders properly', async () => {
  mswServer.use(
    http.get(
      config.basepath +
        'api/app/jobs/:job_id/:password/quality-report/segments',
      () => {
        return HttpResponse.json({
          segments: [
            {
              comments: [],
              dataRefMap: [],
              edit_distance: null,
              file: {
                id: '3',
                first_segment: '12730',
                last_segment: '14468',
                file_name: 'projects.json',
                raw_words: '8082.00',
                weighted_words: '4382.60',
                standard_words: '5078.20',
                metadata: [],
              },
              ice_locked: '0',
              ice_modified: false,
              id: 12730,
              is_pre_translated: false,
              issues: [],
              last_revisions: null,
              last_translation: null,
              locked: '0',
              match_type: 'MT',
              parsed_time_to_edit: ['00', '00', '00', '00'],
              pee: 0,
              pee_translation_revise: 0,
              pee_translation_suggestion: 0,
              raw_word_count: '1.00',
              revision_number: null,
              secs_per_word: 0,
              segment: 'Flexidy',
              segment_hash: null,
              source_page: null,
              status: 'DRAFT',
              suggestion: 'Flexidy',
              suggestion_match: '85',
              suggestion_source: 'MT',
              target: 'it-IT',
              time_to_edit: 0,
              time_to_edit_revise: 0,
              time_to_edit_revise_2: 0,
              time_to_edit_translation: null,
              translation: 'Flexidy',
              version: '1622028343',
              version_number: null,
              warnings: {
                details: null,
                total: 0,
              },
            },
            {
              comments: [],
              dataRefMap: [],
              edit_distance: null,
              file: {
                id: '3',
                first_segment: '12730',
                last_segment: '14468',
                file_name: 'projects.json',
                raw_words: '8082.00',
                weighted_words: '4382.60',
                standard_words: '5078.20',
                metadata: [],
              },
              ice_locked: '0',
              ice_modified: false,
              id: 12731,
              is_pre_translated: false,
              issues: [],
              last_revisions: null,
              last_translation: null,
              locked: '0',
              match_type: 'MT',
              parsed_time_to_edit: ['00', '00', '00', '00'],
              pee: 25,
              pee_translation_revise: 0,
              pee_translation_suggestion: 0,
              raw_word_count: '3.00',
              revision_number: null,
              secs_per_word: 0,
              segment: '5/28/2020',
              segment_hash: null,
              source_page: null,
              status: 'DRAFT',
              suggestion: '28/5/2020',
              suggestion_match: '85',
              suggestion_source: 'MT',
              target: 'it-IT',
              time_to_edit: 0,
              time_to_edit_revise: 0,
              time_to_edit_revise_2: 0,
              time_to_edit_translation: null,
              translation: '5/28/2020',
              version: '1622045444',
              version_number: '0',
              warnings: {
                details: null,
                total: 0,
              },
            },
            {
              comments: [],
              dataRefMap: [],
              edit_distance: null,
              file: {
                id: '3',
                first_segment: '12730',
                last_segment: '14468',
                file_name: 'projects.json',
                raw_words: '8082.00',
                weighted_words: '4382.60',
                standard_words: '5078.20',
                metadata: [],
              },
              ice_locked: '0',
              ice_modified: false,
              id: 12732,
              is_pre_translated: false,
              issues: [],
              last_revisions: null,
              last_translation: 'Zoolab',
              locked: '0',
              match_type: 'MT',
              parsed_time_to_edit: ['00', '00', '00', '00'],
              pee: 0,
              pee_translation_revise: 0,
              pee_translation_suggestion: 0,
              raw_word_count: '1.00',
              revision_number: null,
              secs_per_word: 0,
              segment: 'Zoolab',
              segment_hash: null,
              source_page: null,
              status: 'TRANSLATED',
              suggestion: 'Zoolab',
              suggestion_match: '85',
              suggestion_source: 'MT',
              target: 'it-IT',
              time_to_edit: 0,
              time_to_edit_revise: 0,
              time_to_edit_revise_2: 0,
              time_to_edit_translation: null,
              translation: 'Zoolab',
              version: '1622028345',
              version_number: null,
              warnings: {
                details: null,
                total: 0,
              },
            },
            {
              comments: [],
              dataRefMap: [],
              edit_distance: null,
              file: {
                id: '3',
                first_segment: '12730',
                last_segment: '14468',
                file_name: 'projects.json',
                raw_words: '8082.00',
                weighted_words: '4382.60',
                standard_words: '5078.20',
                metadata: [],
              },
              ice_locked: '0',
              ice_modified: false,
              id: 12733,
              is_pre_translated: false,
              issues: [],
              last_revisions: null,
              last_translation: null,
              locked: '0',
              match_type: 'MT',
              parsed_time_to_edit: ['00', '00', '02', 703],
              pee: 0,
              pee_translation_revise: 0,
              pee_translation_suggestion: 0,
              raw_word_count: '5.00',
              revision_number: null,
              secs_per_word: 0.5406,
              segment: 'Fusce posuere felis sed lacus.&nbsp;',
              segment_hash: null,
              source_page: null,
              status: 'DRAFT',
              suggestion: 'Fusce posuere felis sed lacus.',
              suggestion_match: '85',
              suggestion_source: 'MT',
              target: 'it-IT',
              time_to_edit: 0,
              time_to_edit_revise: 0,
              time_to_edit_revise_2: 0,
              time_to_edit_translation: null,
              translation: 'Fusce posuere felis sed lacus.&nbsp;',
              version: '1622028357',
              version_number: null,
              warnings: {
                details: null,
                total: 0,
              },
            },
            {
              comments: [],
              dataRefMap: [],
              edit_distance: null,
              file: {
                id: '3',
                first_segment: '12730',
                last_segment: '14468',
                file_name: 'projects.json',
                raw_words: '8082.00',
                weighted_words: '4382.60',
                standard_words: '5078.20',
                metadata: [],
              },
              ice_locked: '0',
              ice_modified: false,
              id: 12734,
              is_pre_translated: false,
              issues: [],
              last_revisions: null,
              last_translation:
                'Morbi sem mauris, laoreet ut, rhoncus aliquet, pulvinar sed, nisl.&nbsp;',
              locked: '0',
              match_type: 'MT',
              parsed_time_to_edit: ['00', '00', '03', 248],
              pee: 0,
              pee_translation_revise: 0,
              pee_translation_suggestion: 7,
              raw_word_count: '10.00',
              revision_number: null,
              secs_per_word: 0.3248,
              segment:
                'Morbi sem mauris, laoreet ut, rhoncus aliquet, pulvinar sed, nisl.&nbsp;',
              segment_hash: null,
              source_page: null,
              status: 'TRANSLATED',
              suggestion:
                'Morbi sem mauris, laoreet ut, rhoncus aliquet, pulvinar sed, nisl.',
              suggestion_match: '85',
              suggestion_source: 'MT',
              target: 'it-IT',
              time_to_edit: 0,
              time_to_edit_revise: 0,
              time_to_edit_revise_2: 0,
              time_to_edit_translation: null,
              translation:
                'Morbi sem mauris, laoreet ut, rhoncus aliquet, pulvinar sed, nisl.&nbsp;',
              version: '1622028360',
              version_number: null,
              warnings: {
                details: null,
                total: 0,
              },
            },
            {
              comments: [],
              dataRefMap: [],
              edit_distance: null,
              file: {
                id: '3',
                first_segment: '12730',
                last_segment: '14468',
                file_name: 'projects.json',
                raw_words: '8082.00',
                weighted_words: '4382.60',
                standard_words: '5078.20',
                metadata: [],
              },
              ice_locked: '0',
              ice_modified: false,
              id: 12735,
              is_pre_translated: false,
              issues: [],
              last_revisions: null,
              last_translation: null,
              locked: '0',
              match_type: 'MT',
              parsed_time_to_edit: ['00', '00', '00', '00'],
              pee: 0,
              pee_translation_revise: 0,
              pee_translation_suggestion: 0,
              raw_word_count: '5.00',
              revision_number: null,
              secs_per_word: 0,
              segment: 'Nunc rhoncus dui vel sem.&nbsp;',
              segment_hash: null,
              source_page: null,
              status: 'DRAFT',
              suggestion: 'Nunc rhoncus dui vel sem.',
              suggestion_match: '85',
              suggestion_source: 'MT',
              target: 'it-IT',
              time_to_edit: 0,
              time_to_edit_revise: 0,
              time_to_edit_revise_2: 0,
              time_to_edit_translation: null,
              translation: 'Nunc rhoncus dui vel sem.&nbsp;',
              version: '1622045444',
              version_number: '0',
              warnings: {
                details: null,
                total: 0,
              },
            },
            {
              comments: [],
              dataRefMap: [],
              edit_distance: null,
              file: {
                id: '3',
                first_segment: '12730',
                last_segment: '14468',
                file_name: 'projects.json',
                raw_words: '8082.00',
                weighted_words: '4382.60',
                standard_words: '5078.20',
                metadata: [],
              },
              ice_locked: '0',
              ice_modified: false,
              id: 12736,
              is_pre_translated: false,
              issues: [],
              last_revisions: null,
              last_translation: null,
              locked: '0',
              match_type: 'MT',
              parsed_time_to_edit: ['00', '00', '00', '00'],
              pee: 0,
              pee_translation_revise: 0,
              pee_translation_suggestion: 0,
              raw_word_count: '2.00',
              revision_number: null,
              secs_per_word: 0,
              segment: 'Sed sagittis.&nbsp;',
              segment_hash: null,
              source_page: null,
              status: 'DRAFT',
              suggestion: 'Sed sagittis.',
              suggestion_match: '85',
              suggestion_source: 'MT',
              target: 'it-IT',
              time_to_edit: 0,
              time_to_edit_revise: 0,
              time_to_edit_revise_2: 0,
              time_to_edit_translation: null,
              translation: 'Sed sagittis.&nbsp;',
              version: '1622045444',
              version_number: '0',
              warnings: {
                details: null,
                total: 0,
              },
            },
            {
              comments: [],
              dataRefMap: [],
              edit_distance: null,
              file: {
                id: '3',
                first_segment: '12730',
                last_segment: '14468',
                file_name: 'projects.json',
                raw_words: '8082.00',
                weighted_words: '4382.60',
                standard_words: '5078.20',
                metadata: [],
              },
              ice_locked: '0',
              ice_modified: false,
              id: 12737,
              is_pre_translated: false,
              issues: [],
              last_revisions: null,
              last_translation: null,
              locked: '0',
              match_type: 'MT',
              parsed_time_to_edit: ['00', '00', '00', '00'],
              pee: 8,
              pee_translation_revise: 0,
              pee_translation_suggestion: 0,
              raw_word_count: '17.00',
              revision_number: null,
              secs_per_word: 0,
              segment:
                'Nam congue, risus semper porta volutpat, quam pede lobortis ligula, sit amet eleifend pede libero quis orci.&nbsp;',
              segment_hash: null,
              source_page: null,
              status: 'DRAFT',
              suggestion:
                'Nam congue, risus sempre porta volutpat, quam pede lobortis ligula, sit amet eleifend pede libero quis orci.&nbsp;',
              suggestion_match: '85',
              suggestion_source: 'MT',
              target: 'it-IT',
              time_to_edit: 0,
              time_to_edit_revise: 0,
              time_to_edit_revise_2: 0,
              time_to_edit_translation: null,
              translation:
                'Nam congue, risus semper porta volutpat, quam pede lobortis ligula, sit amet eleifend pede libero quis orci.&nbsp;',
              version: '1622045444',
              version_number: '0',
              warnings: {
                details: null,
                total: 0,
              },
            },
            {
              comments: [],
              dataRefMap: [],
              edit_distance: null,
              file: {
                id: '3',
                first_segment: '12730',
                last_segment: '14468',
                file_name: 'projects.json',
                raw_words: '8082.00',
                weighted_words: '4382.60',
                standard_words: '5078.20',
                metadata: [],
              },
              ice_locked: '0',
              ice_modified: false,
              id: 12738,
              is_pre_translated: false,
              issues: [],
              last_revisions: null,
              last_translation: null,
              locked: '0',
              match_type: 'MT',
              parsed_time_to_edit: ['00', '00', '00', '00'],
              pee: 0,
              pee_translation_revise: 0,
              pee_translation_suggestion: 0,
              raw_word_count: '5.00',
              revision_number: null,
              secs_per_word: 0,
              segment: 'Nullam molestie nibh in lectus.',
              segment_hash: null,
              source_page: null,
              status: 'DRAFT',
              suggestion: 'Nullam molestie nibh in lectus.',
              suggestion_match: '85',
              suggestion_source: 'MT',
              target: 'it-IT',
              time_to_edit: 0,
              time_to_edit_revise: 0,
              time_to_edit_revise_2: 0,
              time_to_edit_translation: null,
              translation: 'Nullam molestie nibh in lectus.',
              version: '1622045444',
              version_number: '0',
              warnings: {
                details: null,
                total: 0,
              },
            },
            {
              comments: [],
              dataRefMap: [],
              edit_distance: null,
              file: {
                id: '3',
                first_segment: '12730',
                last_segment: '14468',
                file_name: 'projects.json',
                raw_words: '8082.00',
                weighted_words: '4382.60',
                standard_words: '5078.20',
                metadata: [],
              },
              ice_locked: '0',
              ice_modified: false,
              id: 12739,
              is_pre_translated: false,
              issues: [],
              last_revisions: null,
              last_translation: null,
              locked: '0',
              match_type: 'MT',
              parsed_time_to_edit: ['00', '00', '00', '00'],
              pee: 0,
              pee_translation_revise: 0,
              pee_translation_suggestion: 0,
              raw_word_count: '2.00',
              revision_number: null,
              secs_per_word: 0,
              segment: 'Lorne Dudden',
              segment_hash: null,
              source_page: null,
              status: 'DRAFT',
              suggestion: 'Lorne Dudden',
              suggestion_match: '85',
              suggestion_source: 'MT',
              target: 'it-IT',
              time_to_edit: 0,
              time_to_edit_revise: 0,
              time_to_edit_revise_2: 0,
              time_to_edit_translation: null,
              translation: 'Lorne Dudden',
              version: '1622045444',
              version_number: '0',
              warnings: {
                details: null,
                total: 0,
              },
            },
            {
              comments: [],
              dataRefMap: [],
              edit_distance: null,
              file: {
                id: '3',
                first_segment: '12730',
                last_segment: '14468',
                file_name: 'projects.json',
                raw_words: '8082.00',
                weighted_words: '4382.60',
                standard_words: '5078.20',
                metadata: [],
              },
              ice_locked: '0',
              ice_modified: false,
              id: 12740,
              is_pre_translated: false,
              issues: [],
              last_revisions: null,
              last_translation: null,
              locked: '0',
              match_type: 'MT',
              parsed_time_to_edit: ['00', '00', '00', '00'],
              pee: 0,
              pee_translation_revise: 0,
              pee_translation_suggestion: 0,
              raw_word_count: '1.00',
              revision_number: null,
              secs_per_word: 0,
              segment: 'Opela',
              segment_hash: null,
              source_page: null,
              status: 'DRAFT',
              suggestion: 'Opela',
              suggestion_match: '85',
              suggestion_source: 'MT',
              target: 'it-IT',
              time_to_edit: 0,
              time_to_edit_revise: 0,
              time_to_edit_revise_2: 0,
              time_to_edit_translation: null,
              translation: 'Opela',
              version: '1622045444',
              version_number: '0',
              warnings: {
                details: null,
                total: 0,
              },
            },
            {
              comments: [],
              dataRefMap: [],
              edit_distance: null,
              file: {
                id: '3',
                first_segment: '12730',
                last_segment: '14468',
                file_name: 'projects.json',
                raw_words: '8082.00',
                weighted_words: '4382.60',
                standard_words: '5078.20',
                metadata: [],
              },
              ice_locked: '0',
              ice_modified: false,
              id: 12741,
              is_pre_translated: false,
              issues: [],
              last_revisions: null,
              last_translation: null,
              locked: '0',
              match_type: 'MT',
              parsed_time_to_edit: ['00', '00', '00', '00'],
              pee: 0,
              pee_translation_revise: 0,
              pee_translation_suggestion: 0,
              raw_word_count: '5.00',
              revision_number: null,
              secs_per_word: 0,
              segment: 'Donec posuere metus vitae ipsum.&nbsp;',
              segment_hash: null,
              source_page: null,
              status: 'DRAFT',
              suggestion: 'Donec posuere metus vitae ipsum.&nbsp;',
              suggestion_match: '85',
              suggestion_source: 'MT',
              target: 'it-IT',
              time_to_edit: 0,
              time_to_edit_revise: 0,
              time_to_edit_revise_2: 0,
              time_to_edit_translation: null,
              translation: 'Donec posuere metus vitae ipsum.&nbsp;',
              version: '1622045444',
              version_number: '0',
              warnings: {
                details: null,
                total: 0,
              },
            },
            {
              comments: [],
              dataRefMap: [],
              edit_distance: null,
              file: {
                id: '3',
                first_segment: '12730',
                last_segment: '14468',
                file_name: 'projects.json',
                raw_words: '8082.00',
                weighted_words: '4382.60',
                standard_words: '5078.20',
                metadata: [],
              },
              ice_locked: '0',
              ice_modified: false,
              id: 12742,
              is_pre_translated: false,
              issues: [],
              last_revisions: null,
              last_translation: null,
              locked: '0',
              match_type: 'MT',
              parsed_time_to_edit: ['00', '00', '00', '00'],
              pee: 0,
              pee_translation_revise: 0,
              pee_translation_suggestion: 0,
              raw_word_count: '3.00',
              revision_number: null,
              secs_per_word: 0,
              segment: 'Aliquam non mauris.&nbsp;',
              segment_hash: null,
              source_page: null,
              status: 'DRAFT',
              suggestion: 'Aliquam non mauris.&nbsp;',
              suggestion_match: '85',
              suggestion_source: 'MT',
              target: 'it-IT',
              time_to_edit: 0,
              time_to_edit_revise: 0,
              time_to_edit_revise_2: 0,
              time_to_edit_translation: null,
              translation: 'Aliquam non mauris.&nbsp;',
              version: '1622045444',
              version_number: '0',
              warnings: {
                details: null,
                total: 0,
              },
            },
            {
              comments: [],
              dataRefMap: [],
              edit_distance: null,
              file: {
                id: '3',
                first_segment: '12730',
                last_segment: '14468',
                file_name: 'projects.json',
                raw_words: '8082.00',
                weighted_words: '4382.60',
                standard_words: '5078.20',
                metadata: [],
              },
              ice_locked: '0',
              ice_modified: false,
              id: 12743,
              is_pre_translated: false,
              issues: [],
              last_revisions: null,
              last_translation: null,
              locked: '0',
              match_type: 'MT',
              parsed_time_to_edit: ['00', '00', '00', '00'],
              pee: 0,
              pee_translation_revise: 0,
              pee_translation_suggestion: 0,
              raw_word_count: '3.00',
              revision_number: null,
              secs_per_word: 0,
              segment: 'Morbi non lectus.',
              segment_hash: null,
              source_page: null,
              status: 'DRAFT',
              suggestion: 'Morbi non lectus.',
              suggestion_match: '85',
              suggestion_source: 'MT',
              target: 'it-IT',
              time_to_edit: 0,
              time_to_edit_revise: 0,
              time_to_edit_revise_2: 0,
              time_to_edit_translation: null,
              translation: 'Morbi non lectus.',
              version: '1622045444',
              version_number: '0',
              warnings: {
                details: null,
                total: 0,
              },
            },
            {
              comments: [],
              dataRefMap: [],
              edit_distance: null,
              file: {
                id: '3',
                first_segment: '12730',
                last_segment: '14468',
                file_name: 'projects.json',
                raw_words: '8082.00',
                weighted_words: '4382.60',
                standard_words: '5078.20',
                metadata: [],
              },
              ice_locked: '0',
              ice_modified: false,
              id: 12744,
              is_pre_translated: false,
              issues: [],
              last_revisions: null,
              last_translation: null,
              locked: '0',
              match_type: 'MT',
              parsed_time_to_edit: ['00', '00', '00', '00'],
              pee: 0,
              pee_translation_revise: 0,
              pee_translation_suggestion: 0,
              raw_word_count: '1.00',
              revision_number: null,
              secs_per_word: 0,
              segment: 'Sonair',
              segment_hash: null,
              source_page: null,
              status: 'DRAFT',
              suggestion: 'Sonair',
              suggestion_match: '85',
              suggestion_source: 'MT',
              target: 'it-IT',
              time_to_edit: 0,
              time_to_edit_revise: 0,
              time_to_edit_revise_2: 0,
              time_to_edit_translation: null,
              translation: 'Sonair',
              version: '1622045444',
              version_number: '0',
              warnings: {
                details: null,
                total: 0,
              },
            },
            {
              comments: [],
              dataRefMap: [],
              edit_distance: null,
              file: {
                id: '3',
                first_segment: '12730',
                last_segment: '14468',
                file_name: 'projects.json',
                raw_words: '8082.00',
                weighted_words: '4382.60',
                standard_words: '5078.20',
                metadata: [],
              },
              ice_locked: '0',
              ice_modified: false,
              id: 12745,
              is_pre_translated: false,
              issues: [],
              last_revisions: null,
              last_translation: null,
              locked: '0',
              match_type: 'MT',
              parsed_time_to_edit: ['00', '00', '00', '00'],
              pee: 25,
              pee_translation_revise: 0,
              pee_translation_suggestion: 0,
              raw_word_count: '3.00',
              revision_number: null,
              secs_per_word: 0,
              segment: '8/18/2020',
              segment_hash: null,
              source_page: null,
              status: 'DRAFT',
              suggestion: '18/8/2020',
              suggestion_match: '85',
              suggestion_source: 'MT',
              target: 'it-IT',
              time_to_edit: 0,
              time_to_edit_revise: 0,
              time_to_edit_revise_2: 0,
              time_to_edit_translation: null,
              translation: '8/18/2020',
              version: '1622045444',
              version_number: '0',
              warnings: {
                details: null,
                total: 0,
              },
            },
            {
              comments: [],
              dataRefMap: [],
              edit_distance: null,
              file: {
                id: '3',
                first_segment: '12730',
                last_segment: '14468',
                file_name: 'projects.json',
                raw_words: '8082.00',
                weighted_words: '4382.60',
                standard_words: '5078.20',
                metadata: [],
              },
              ice_locked: '0',
              ice_modified: false,
              id: 12746,
              is_pre_translated: false,
              issues: [],
              last_revisions: null,
              last_translation: null,
              locked: '0',
              match_type: 'MT',
              parsed_time_to_edit: ['00', '00', '00', '00'],
              pee: 0,
              pee_translation_revise: 0,
              pee_translation_suggestion: 0,
              raw_word_count: '1.00',
              revision_number: null,
              secs_per_word: 0,
              segment: 'Treeflex',
              segment_hash: null,
              source_page: null,
              status: 'DRAFT',
              suggestion: 'Treeflex',
              suggestion_match: '85',
              suggestion_source: 'MT',
              target: 'it-IT',
              time_to_edit: 0,
              time_to_edit_revise: 0,
              time_to_edit_revise_2: 0,
              time_to_edit_translation: null,
              translation: 'Treeflex',
              version: '1622045444',
              version_number: '0',
              warnings: {
                details: null,
                total: 0,
              },
            },
            {
              comments: [],
              dataRefMap: [],
              edit_distance: null,
              file: {
                id: '3',
                first_segment: '12730',
                last_segment: '14468',
                file_name: 'projects.json',
                raw_words: '8082.00',
                weighted_words: '4382.60',
                standard_words: '5078.20',
                metadata: [],
              },
              ice_locked: '0',
              ice_modified: false,
              id: 12747,
              is_pre_translated: false,
              issues: [],
              last_revisions: null,
              last_translation: null,
              locked: '0',
              match_type: 'MT',
              parsed_time_to_edit: ['00', '00', '00', '00'],
              pee: 7,
              pee_translation_revise: 0,
              pee_translation_suggestion: 0,
              raw_word_count: '18.00',
              revision_number: null,
              secs_per_word: 0,
              segment:
                'Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Mauris viverra diam vitae quam.&nbsp;',
              segment_hash: null,
              source_page: null,
              status: 'DRAFT',
              suggestion:
                'Vestibolo ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Mauris viverra diam vitae quam.&nbsp;',
              suggestion_match: '85',
              suggestion_source: 'MT',
              target: 'it-IT',
              time_to_edit: 0,
              time_to_edit_revise: 0,
              time_to_edit_revise_2: 0,
              time_to_edit_translation: null,
              translation:
                'Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Mauris viverra diam vitae quam.&nbsp;',
              version: '1622045444',
              version_number: '0',
              warnings: {
                details: null,
                total: 0,
              },
            },
            {
              comments: [],
              dataRefMap: [],
              edit_distance: null,
              file: {
                id: '3',
                first_segment: '12730',
                last_segment: '14468',
                file_name: 'projects.json',
                raw_words: '8082.00',
                weighted_words: '4382.60',
                standard_words: '5078.20',
                metadata: [],
              },
              ice_locked: '0',
              ice_modified: false,
              id: 12748,
              is_pre_translated: false,
              issues: [],
              last_revisions: null,
              last_translation: null,
              locked: '0',
              match_type: '100%_PUBLIC',
              parsed_time_to_edit: ['00', '00', '00', '00'],
              pee: 0,
              pee_translation_revise: 0,
              pee_translation_suggestion: 0,
              raw_word_count: '2.00',
              revision_number: null,
              secs_per_word: 0,
              segment: 'Suspendisse potenti.&nbsp;',
              segment_hash: null,
              source_page: null,
              status: 'DRAFT',
              suggestion: 'Suspendisse potenti.&nbsp;',
              suggestion_match: '100',
              suggestion_source: 'TM',
              target: 'it-IT',
              time_to_edit: 0,
              time_to_edit_revise: 0,
              time_to_edit_revise_2: 0,
              time_to_edit_translation: null,
              translation: 'Suspendisse potenti.&nbsp;',
              version: '1622045444',
              version_number: '0',
              warnings: {
                details: null,
                total: 0,
              },
            },
            {
              comments: [],
              dataRefMap: [],
              edit_distance: null,
              file: {
                id: '3',
                first_segment: '12730',
                last_segment: '14468',
                file_name: 'projects.json',
                raw_words: '8082.00',
                weighted_words: '4382.60',
                standard_words: '5078.20',
                metadata: [],
              },
              ice_locked: '0',
              ice_modified: false,
              id: 12749,
              is_pre_translated: false,
              issues: [],
              last_revisions: null,
              last_translation: null,
              locked: '0',
              match_type: 'MT',
              parsed_time_to_edit: ['00', '00', '00', '00'],
              pee: 0,
              pee_translation_revise: 0,
              pee_translation_suggestion: 0,
              raw_word_count: '5.00',
              revision_number: null,
              secs_per_word: 0,
              segment: 'Nullam porttitor lacus at turpis.&nbsp;',
              segment_hash: null,
              source_page: null,
              status: 'DRAFT',
              suggestion: 'Nullam porttitor lacus at turpis.',
              suggestion_match: '85',
              suggestion_source: 'MT',
              target: 'it-IT',
              time_to_edit: 0,
              time_to_edit_revise: 0,
              time_to_edit_revise_2: 0,
              time_to_edit_translation: null,
              translation: 'Nullam porttitor lacus at turpis.&nbsp;',
              version: '1622045017',
              version_number: null,
              warnings: {
                details: null,
                total: 0,
              },
            },
          ],
          first_segment: 12730,
          last_segment: 14468,
          _params: {
            ref_segment: null,
            where: null,
            step: null,
            filter: {
              id_segment: '',
            },
          },
          _links: {
            base: 'https://dev.matecat.com',
            last_segment_id: 12749,
            pages: 87,
            items_per_page: 20,
            total_items: 1739,
            self: '/api/app/jobs/3/21c3582cae45/quality-report/segments?filter%5Bid_segment%5D=',
            next: '/api/app/jobs/3/21c3582cae45/quality-report/segments?ref_segment=12749',
            prev: null,
          },
        })
      },
    ),

    http.get(config.basepath + 'api/app/jobs/:job_id/:password', () => {
      return HttpResponse.json({
        job: {
          id: 3,
          chunks: [
            {
              id: 3,
              password: '21c3582cae45',
              source: 'en-US',
              target: 'it-IT',
              sourceTxt: 'English US',
              targetTxt: 'Italian',
              status: 'active',
              subject: 'general',
              subject_printable: 'General',
              owner: 'luca.barone@translated.net',
              time_to_edit: {
                total: 0,
                t: 0,
                r1: 0,
                r2: 0,
              },
              total_time_to_edit: 5951,
              avg_post_editing_effort: 0,
              open_threads_count: 0,
              created_at: '2021-05-26T10:29:10+02:00',
              pee: 0,
              private_tm_key: [],
              warnings_count: 0,
              warning_segments: [],
              stats: {
                equivalent: {
                  new: 0,
                  draft: 0,
                  translated: 0,
                  approved: 13,
                  approved2: 0,
                  total: 13,
                },
                raw: {
                  new: 0,
                  draft: 0,
                  translated: 0,
                  approved: 0,
                  approved2: 0,
                  total: 0,
                },
              },
              outsource: null,
              translator: null,
              total_raw_wc: 8082,
              standard_wc: 5078,
              quality_summary: [
                {
                  revision_number: 1,
                  feedback: null,
                  model_version: null,
                  equivalent_class: 80,
                  is_pass: 0,
                  quality_overall: 'excellent',
                  errors_count: 0,
                  revise_issues: {
                    err_typing: {
                      allowed: 8.8,
                      found: 0,
                      founds: {
                        minor: '0',
                        major: '0',
                      },
                      vote: 'Excellent',
                    },
                    err_translation: {
                      allowed: 8.8,
                      found: 0,
                      founds: {
                        minor: '0',
                        major: '0',
                      },
                      vote: 'Excellent',
                    },
                    err_terminology: {
                      allowed: 13.1,
                      found: 0,
                      founds: {
                        minor: '0',
                        major: '0',
                      },
                      vote: 'Excellent',
                    },
                    err_language: {
                      allowed: 13.1,
                      found: 0,
                      founds: {
                        minor: '0',
                        major: '0',
                      },
                      vote: 'Excellent',
                    },
                    err_style: {
                      allowed: 21.9,
                      found: 0,
                      founds: {
                        minor: '0',
                        major: '0',
                      },
                      vote: 'Excellent',
                    },
                  },
                  score: 0,
                  categories: [
                    {
                      label: 'Typing',
                      id: 'err_typing',
                      severities: [
                        {
                          label: 'minor',
                          penalty: 0.03,
                        },
                        {
                          label: 'major',
                          penalty: 1,
                        },
                      ],
                      subcategories: [],
                      options: [],
                    },
                    {
                      label: 'Translation',
                      id: 'err_translation',
                      severities: [
                        {
                          label: 'minor',
                          penalty: 0.03,
                        },
                        {
                          label: 'major',
                          penalty: 1,
                        },
                      ],
                      subcategories: [],
                      options: [],
                    },
                    {
                      label: 'Terminology',
                      id: 'err_terminology',
                      severities: [
                        {
                          label: 'minor',
                          penalty: 0.03,
                        },
                        {
                          label: 'major',
                          penalty: 1,
                        },
                      ],
                      subcategories: [],
                      options: [],
                    },
                    {
                      label: 'Language Quality',
                      id: 'err_language',
                      severities: [
                        {
                          label: 'minor',
                          penalty: 0.03,
                        },
                        {
                          label: 'major',
                          penalty: 1,
                        },
                      ],
                      subcategories: [],
                      options: [],
                    },
                    {
                      label: 'Style',
                      id: 'err_style',
                      severities: [
                        {
                          label: 'minor',
                          penalty: 0.03,
                        },
                        {
                          label: 'major',
                          penalty: 1,
                        },
                      ],
                      subcategories: [],
                      options: [],
                    },
                  ],
                  total_issues_weight: 0,
                  total_reviewed_words_count: 0,
                  passfail: '',
                  total_time_to_edit: 0,
                },
              ],
              urls: {
                translate_url:
                  'https://dev.matecat.com/translate/projects.json/en-US-it-IT/3-21c3582cae45',
                revise_urls: [
                  {
                    revision_number: 1,
                    url: 'https://dev.matecat.com/revise/projects.json/en-US-it-IT/3-21c3582cae45',
                  },
                ],
                original_download_url:
                  'https://dev.matecat.com/?action=downloadOriginal&id_job=3&password=21c3582cae45&download_type=all&filename=3',
                translation_download_url:
                  'https://dev.matecat.com/?action=downloadFile&id_job=3&id_file=&password=21c3582cae45&download_type=all',
                xliff_download_url:
                  'https://dev.matecat.com/SDLXLIFF/3/21c3582cae45/3.zip',
              },
            },
          ],
        },
      })
    }),
  )

  require('../../../../common')

  const header = document.createElement('header')

  const content = document.createElement('div')
  content.id = 'qr-root'

  const modal = document.createElement('div')
  modal.id = 'modal'

  const footer = document.createElement('footer')

  document.body.appendChild(header)
  document.body.appendChild(content)
  document.body.appendChild(modal)
  document.body.appendChild(footer)

  await import('./QualityReport')

  // expect(screen.getByText('Loading')).toBeVisible()

  await waitFor(() => {
    expect(screen.getByText('QR Job summary')).toBeVisible()
  })
  act(() => {
    const modalMountPoint = createRoot(modal)
    modalMountPoint.unmount()
    const contentMountPoint = createRoot(content)
    contentMountPoint.unmount()
    const headerMountPoint = createRoot(header)
    headerMountPoint.unmount()
  })
})
