<div metal:define-macro="template-microsofthub">
    <!-- inizio blocco microsoft -->
    <template id="mt-provider-microsofthub-fields">
        <p class="required pull-left"><sup>*</sup> Required fields.</p>
        <br class="clear" />
        <span class="mt-error-key">Error message</span>
        <label for="new-engine-name">Engine name<sup>*</sup></label>
        <input class="required" id="new-engine-name" placeholder="here" />
        <div class="provider-data">
            <div class="provider-field">
                <label>ClientID<sup>*</sup></label>
                <input class="required" data-field-name="client_id" placeholder="here" />
            </div>
            <div class="provider-field">
                <label>Client Secret<sup>*</sup></label>
                <input class="required" data-field-name="secret" placeholder="here" />
            </div>
            <div class="provider-field">
                <label>Category</label>
                <input data-field-name="category" placeholder="here" />
            </div>
        </div>
    </template>
    <template id="mt-provider-microsofthub-msg">
        <p>With <strong>Microsoft Translator Hub</strong> you can build your own machine translation system starting from your own data and/or public data.</p>
        <p><strong>Microsoft Translator Hub</strong> will require many hours or days to build the system: time varies based on the amount of data provided.</p>
        <p>Once the system is ready, use the parameters provided by <strong>Microsoft Translator Hub</strong> to fill out the form above.</p>
        <a href="https://hub.microsofttranslator.com/SignIn?returnURL=%2FHome%2FIndex" target="_blank" class="continuebtn btn-ok">Connect your MT system</a>
    </template>
    <!-- fine blocco microsoft -->
</div>

<div metal:define-macro="template-iptranslator">
    <!-- inizio blocco iptranslator -->
    <template id="mt-provider-iptranslator-fields">
        <p>Fill out the form with the parameters provided by Iconic Translation Machines to connect to IPTranslator.</p>
        <p class="required pull-left"><sup>*</sup> Required fields.</p>
        <br class="clear" />
        <span class="mt-error-key">Error message</span>
        <label for="new-engine-name">Engine name<sup>*</sup></label>
        <input class="required" id="new-engine-name" placeholder="here" />
        <br class="clear" />
        <div class="provider-data">
            <div class="provider-field">
                <label>Key<sup>*</sup></label>
                <input class="required" data-field-name="secret" placeholder="here" />
                <br class="clear" />
            </div>
        </div>
    </template>
    <template id="mt-provider-iptranslator-msg">
        <p><b>IPTranslator from Iconic Translation Machines</b> is a specialised machine translation system for the patent and legal translation industry.</p><p> It delivers high-quality machine translation adapted specifically for this domain based on scientific expertise and deep domain knowledge. It does not require any additional data.</p>
        <p><strong>Warning</strong>: IPTranslator has a startup time of some minutes. Make sure your engine is up before analyzing a document. IPTranslator can only serve few requests per second, analysis may be slow.</p>
        <p>Contact Iconic Translation Machines to get your MT system.</p>
        <a href="http://iconictranslation.com/about/contact/" target="_blank" class="continuebtn btn-ok">Contact Iconic</a>
    </template>
    <!-- fine blocco iptranslator -->
</div>

<div metal:define-macro="template-deeplingo">
    <!-- inizio blocco deeplingo -->
    <template id="mt-provider-deeplingo-fields">
        <p>Fill out the form with the data to connect to your DeepLingo MT system.</p>
        <p class="required pull-left"><sup>*</sup> Required fields.</p>
        <br class="clear" />
        <span class="mt-error-key">Error message</span>
        <label for="new-engine-name">Engine name<sup>*</sup></label>
        <input class="required" id="new-engine-name" placeholder="here" />
        <br class="clear" />
        <div class="provider-data">
            <div class="provider-field">
                <label>URL<sup>*</sup></label>
                <input class="required" data-field-name="url" placeholder="here" />
                <br class="clear" />
            </div>
            <div class="provider-field">
                <label>Client Secret<sup>*</sup></label>
                <input class="required" data-field-name="secret" placeholder="here" />
                <br class="clear" />
            </div>
        </div>
    </template>
    <template id="mt-provider-deeplingo-msg">
        <p><strong>DeepLingo</strong> provides fully customized models for statistical machine translation engines. The models are adapted to your needs by our experts: they include your technical terms, respect the domain-specific expressions and are adapted to the context.</p>
        <p><strong>Warning</strong>: If running on a single machine, DeepLingo can only serve few requests per second and the analysis in MateCat may be slow.</p>
        <p>Contact DeepLingo to build your own machine translation system.</p>
        <a href="http://www.deeplingo.com" class="continuebtn btn-ok">Contact Deeplingo</a>
    </template>
    <!-- fine blocco deeplingo -->
</div>

<div metal:define-macro="template-moses">
    <!-- inizio blocco moses -->
    <template id="mt-provider-moses-fields">
        <p>Fill out the form with the connection data to your own Moses MT system.</p>
        <p class="required pull-left"><sup>*</sup> Required fields.</p>
        <br class="clear" />
        <span class="mt-error-key">Error message</span>
        <br class="clear" />
        <label for="new-engine-name">Engine name<sup>*</sup></label>
        <input class="required" id="new-engine-name" placeholder="here" />
        <br class="clear" />
        <div class="provider-data">
            <div class="provider-field">
                <label>URL<sup>*</sup></label>
                <input class="required" data-field-name="url" placeholder="here" />
                <br class="clear" />
            </div>
            <div class="provider-field">
                <label>API key<sup>*</sup></label>
                <input class="required" data-field-name="secret" placeholder="here" />
                <br class="clear" />
            </div>
        </div>
    </template>
    <template id="mt-provider-moses-msg">
        <p>If you host your own machine translation systems based on Moses, you can use the Moses server component to connect to MateCat or expose your MT system via API compliant with these specs.</p>
        <p><strong>Warning</strong>: Moses, if running on a single machine can only serve few requests per second, in that case, analysis may be slower than MyMemory, Google Translate or Microsoft (more than 100 segments per second).</p>
        <a href="mailto:support@matecat.com" class="continuebtn btn-ok">Contact MateCat</a>
    </template>
    <!-- fine blocco moses -->
</div>

<div metal:define-macro="template-tauyou">
    <!-- inizio blocco tauyou -->
    <template id="mt-provider-tauyou-fields">
        <p>Fill out the form with the connection data to your own Tauyou MT system.</p>
        <p class="required pull-left"><sup>*</sup> Required fields.</p>
        <br class="clear" />
        <span class="mt-error-key">Error message</span>
        <br class="clear" />
        <label for="new-engine-name">Engine name<sup>*</sup></label>
        <input class="required" id="new-engine-name" placeholder="here" />
        <br class="clear" />
        <div class="provider-data">
            <div class="provider-field">
                <label>URL<sup>*</sup></label>
                <input class="required" data-field-name="url" placeholder="here" />
                <br class="clear" />
            </div>
            <div class="provider-field">
                <label>API key<sup>*</sup></label>
                <input class="required" data-field-name="secret" placeholder="here" />
                <br class="clear" />
            </div>
        </div>
    </template>
    <template id="mt-provider-tauyou-msg">client
        <p>Customized machine translation engines from tauyou are created starting from the Translation Memories (TMs) from our clients, so that we provide the best possible adaptation for a particular language field. <br/>
            Our clients in more than 20 countries are post-editing machine translation in the languages they work on, including but not limited to all European Languages, Chinese, Japanese, Korean, and Russian. </p>
        <p>If you want to learn more about our managed MT services, <a href="mailto:info@tauyou.com?Subject=tauyou MT in MateCat" target="_top">please contact us</a>.</p>
    </template>
    <!-- fine blocco tauyou -->
</div>

<div metal:define-macro="template-letsmt">
    <!-- sakam letsmt bloku -->
    <template id="mt-provider-letsmt-fields">
        <style>
            .clientid-link {
                float: right;
                margin-top: -10px;
            }
        </style>
        <p class="required pull-left"><sup>*</sup> Required fields.</p>
        <br class="clear" />
        <span class="mt-error-key">Error message</span>
        <label for="new-engine-name">Engine name<sup>*</sup></label>
        <input class="required" id="new-engine-name" placeholder="here" />
        <div class="provider-data">
            <div class="provider-field">
                <label>Client ID<sup>*</sup></label>
                <input class="required" data-field-name="client_id" placeholder="here" />
            </div>
            <a href="https://readymt.tilde.com/Account/LoginApp?Client=matecat" target="_blank" class="clientid-link">Get my Client ID</a>
            <br class="clear" />
        </div>
        <script>
            $('#mt-provider-details #add-mt-provider-confirm .uploadkey').text('Continue');
        </script>
    </template>
    <template id="mt-provider-letsmt-msg">
        <style>
            .msg-button-container .continuebtn {
                width: 122px!important;
                display: inline-block!important;
            }
            .msg-button-container {
                text-align: center!important;
            }
            @media screen and (min-width: 901px) {
                .push-left {
                    margin-left: 15px!important;
                }
                .push-right {
                    margin-right: 15px!important;
                }
            }

            @media screen and (max-width: 900px) {
                .push-left, .push-right {
                    margin: 0px 0px 10px 0px!important;
                }
            }
        </style>
        <p><strong>Tilde</strong> develops custom MT systems for specific language pairs and domains. We specialize in fully customized, terminology-savvy MT for complex languages like the Nordic, Baltic, Russian, and Central and Eastern European languages.</p>
        <p>In order to boost translation accuracy, Tilde MT systems can fully integrate your domain-specific terminology in the right inflectional forms.</p>
        <p>Contact Tilde MT to get a custom MT system for your language pair and domain.</p>
        <p><i>Please note: it may take several moments for a system to become available.</i></p>
        <div class="msg-button-container">
            <a href="http://www.tilde.com/mt/contacts" target="_blank" class="continuebtn btn-ok">Contact Tilde MT</a>
        </div>
    </template>
    <template id="mt-provider-letsmt-config-fields">
        <script>
            <![CDATA[
            // The first template set this text to "Continue". Set it back now.
            $('#mt-provider-details #add-mt-provider-confirm .uploadkey').text('Confirm');

            // for some reason the javascript gets escaped without the CDATA tag. TODO: find out why
            function fetchTerms() {
                var termsFieldSelector = '.insert-tm .provider-data .provider-field [data-field-name="terms_id"]';
                $(termsFieldSelector).html("");

                var providerData = {};
                $('.insert-tm .provider-data .provider-field').each(function () {
                    var field = $(this).find('input, select').first();
                    if (field.prop('type') === 'checkbox') {
                        providerData[field.attr('data-field-name')] = field.prop('checked');
                    } else {
                        providerData[field.attr('data-field-name')] = field.val();
                    }
                });

                if (!providerData['system_id']) {
                    return;
                }

                providerData['function'] = 'getTermList';

                var provider = 'letsmt';
                var name = 'temp engine';
                var providerName = 'Tilde MT';
                data = {
                    action: 'engine',
                    exec: 'execute',
                    name: name,
                    provider: provider,
                    data: JSON.stringify(providerData)
                };
                context = data;
                context.providerName = providerName;

                APP.doRequest({
                    data: data,
                    context: context,
                    error: function() {
                        console.log('error');
                    },
                    success: function(d) {
                        console.log('AJAX response received.');
                        if(d.errors.length) {
                            console.log('error');
                            $('#mt-provider-details .error').text(d.errors[0].message);
                        } else {
                            $('#mt-provider-details .error').text("");
                            if(d.data.result && d.data.result.terms && Object.keys(d.data.result.terms).length) {
                                $(termsFieldSelector).append("<option value=''>--</option>");
                                $terms = d.data.result.terms;
                                console.log('success');
                                for (var key in $terms){
                                    $(termsFieldSelector).append("<option value='" + key + "'>" + $terms[key] + "</option>");
                                }
                            }
                        }

                    }
                });
            }

            function toggleQEEnabled(checkbox) {
                var disabled = !checkbox.checked;
                $('#minimum_qe_field input').prop('disabled', disabled);
                if (disabled) {
                    $('#minimum_qe_field').addClass('disabled');
                } else {
                    $('#minimum_qe_field').removeClass('disabled');
                }
            }

            function createFilters() {
                var sourceSelect = $('#source_lang_field select');
                var targetSelect = $('#target_lang_field select');
                var systemSelect = $('#system_field select');
                var systemOptions = $('#system_field select option');
                var sourceLangIdInput = $('#source-lang-id');
                var targetLangIdInput = $('#target-lang-id');
                var showOnlyRunningCheckbox = $('#filter_running_field input');
                var showOnlyRunning = showOnlyRunningCheckbox.prop('checked');
                var runningStatuses = { running: true, standby: true };
                sourceSelect.empty();

                // a mapping from available source languages to respective target languages
                var directions = [];
                systemOptions.each(function (){
                    var systemStatus = $(this).data('status');
                    if(!(systemStatus in runningStatuses) && showOnlyRunning) {
                        return;
                    }
                    var sourceCode = $(this).data('source-language-code');
                    var targetCode = $(this).data('target-language-code');
                    var sourceName = $(this).data('source-language-name');
                    var targetName = $(this).data('target-language-name');

                    if(!(sourceCode in directions)){
                        directions[sourceCode] = {};
                        directions[sourceCode].name = sourceName;
                        directions[sourceCode].target = {};
                    }
                    directions[sourceCode].target[targetCode] = targetName;
                });

                var sortedSourceCodes = [];
                for (var sourceCode in directions) {
                    sortedSourceCodes.push(sourceCode);
                }
                sortedSourceCodes.sort();

                for (var i=0; i<sortedSourceCodes.length; i++) {
                    var sourceCode = sortedSourceCodes[i];
                    var option = $('<option value="' + sourceCode + '">' + directions[sourceCode].name + '</option>');
                    sourceSelect.append(option);
                }

                var filterSystems = function() {
                    var selectedSourceCode = sourceSelect.val();
                    var selectedTargetCode = targetSelect.val();

                    systemOptions.each(function () {
                        var systemSourceCode = $(this).data('source-language-code');
                        var systemTargetCode = $(this).data('target-language-code');
                        var systemStatus = $(this).data('status');

                        if (systemSourceCode == selectedSourceCode
                                && systemTargetCode == selectedTargetCode
                                &&((systemStatus in runningStatuses) || !showOnlyRunning)) {
                            $(this).show();
                        } else {
                            $(this).hide();
                        }
                    });

                    var firstAvailableTargetCode = $(systemSelect.find('option').not(function() { return $(this).css("display") == "none" })[0]).val();
                    systemSelect.val(firstAvailableTargetCode).change();
                }

                var fillTargetLanguages = function () {
                    targetSelect.empty();
                    var selectedSourceCode = sourceSelect.val();
                    var targetChoices = directions[selectedSourceCode].target

                    var sortedTargetCodes = [];
                    for (var targetCode in targetChoices) {
                        sortedTargetCodes.push(targetCode);
                    }
                    sortedTargetCodes.sort();

                    for (var i=0; i<sortedTargetCodes.length; i++) {
                        var targetCode = sortedTargetCodes[i];
                        var option = $('<option value="' + targetCode + '">' + targetChoices[targetCode] + '</option>');
                        targetSelect.append(option);
                    }

                    targetSelect.val(targetSelect.find("option:first").val()).change();
                }

                var setLanguageCodes = function () {
                    var systemSourceCode = $("option:selected", this).data('source-language-code');
                    var systemTargetCode = $("option:selected", this).data('target-language-code');

                    sourceLangIdInput.val(systemSourceCode);
                    targetLangIdInput.val(systemTargetCode);
                }

                // this method can get called multiple times. remove previously added event handlers
                sourceSelect.off('change');
                targetSelect.off('change');
                sourceSelect.change(fillTargetLanguages);
                targetSelect.change(filterSystems);
                systemSelect.change(setLanguageCodes);
                sourceSelect.val(sourceSelect.find("option:first").val()).change();
            }

            function renderMTConfigCallback () {
                createFilters();
            }
            ]]>
        </script>
        <style>
            .insert-tm select {
                width: 324px!important;
            }
            .insert-tm input[type="number"] {
                width: 50px!important;
            }
            #source_lang_field select, #target_lang_field select {
                width: 130px!important;
            }
            #target_lang_field label {
                width: 40px!important;
            }
            .clear {
                clear: both;
            }
            #filter_running_field {
                margin-top: -10px!important;
                height: 40px!important;
            }
            #filter_running_field label:last-of-type {
                width: 273px!important;
                text-align: left!important;
                margin-left: 10px!important;
                /* font-weight: normal!important; */
                position: relative!important;
                top: -10px!important;
            }
            .lighttext {
                font-size: small!important;
                color: #999!important;
                font-weight: normal!important;
            }
            .info{
                background: url(../../public/img/info.png) no-repeat center;
                background-size: 24px 24px;
                display: inline-block;
                width: 22px;
                height: 22px;
                margin: 0;
            }
        </style>
        <p class="required pull-left"><sup>*</sup> Required fields.</p>
        <br class="clear" />
        <span class="mt-error-key">Error message</span>
        <input class="required hide" id="new-engine-name" placeholder="here" />
        <br class="clear" />
        <div class="provider-data">
            <div class="provider-field hide">
                <label>Client ID<sup>*</sup></label>
                <input class="required" data-field-name="client_id" placeholder="here" />
            </div>
            <div id="source_lang_field" class="pull-left">
                <label>From</label>
                <select/>
            </div>
            <div id="target_lang_field" class="pull-right">
                <label>To</label>
                <select/>
            </div>
            <div class="clear"></div>
            <div id="system_field" class="provider-field">
                <label>Translation system<sup>*</sup></label>
                <select class="required" data-field-name="system_id" onchange="fetchTerms()"/>
            </div>
            <div id="filter_running_field">
                <label></label>
                <input type="checkbox" checked="checked" onchange="createFilters()"/>
                <label class="lighttext">Show running systems only</label>
            </div>
            <div class="provider-field">
                <label>Terms corpora</label>
                <select class="required" data-field-name="terms_id" />
            </div>
            <div id="use_qe_field" class="provider-field pull-left">
                <label>QE beta</label>
                <input type="checkbox" data-field-name="use_qe" onchange="toggleQEEnabled(this)" />
                <a href="http://www.tilde.com/mt/tools/matecat" target="_blank"  class="info" title="You will see a translation only for segments with a QE (Quality Estimation) beta score above the selected figure."> </a>
            </div>
            <div id="minimum_qe_field" class="provider-field pull-right disabled">
                <label class="lighttext">Don't show translation if its QE score is below</label>
                <input type="number" step="0.01" min="0" max="1" value="0" data-field-name="minimum_qe" disabled="true"/>
            </div>
            <div class="provider-field hide">
                <input id="source-lang-id" data-field-name="source_lang" />
            </div>
            <div class="provider-field hide">
                <input id="target-lang-id" data-field-name="target_lang" />
            </div>
            <div class="clear"></div>
        </div>
    </template>

    <template id="mt-provider-letsmt-config-msg">
        <p>Please select your source and target languages. Then choose a translation system from the provided list.</p>
        <p>You can also select a terms corpora from your terminology sets. The terms corpora will complement the MT engine to boost translation quality, accuracy, and consistency.</p>
        <p>By clicking the QE beta box, users can select the minumum Quality Estimation score for translated segments. Segments that fall bellow the indicated QE score will not be displayed.</p>
        <p>If you have any questions, please contact Tilde MT support at: <a href="mailto:mt@tilde.com">mt@tilde.com</a>.</p>
    </template>
    <!-- beidzam letsmt bloku -->
</div>

<div metal:define-macro="template-apertium">
    <!-- inizio blocco apertium -->
    <template id="mt-provider-apertium-fields">
        <p>Fill out the form with the connection data to your own Apertium MT system.</p>
        <p class="required pull-left"><sup>*</sup> Required fields.</p>
        <br class="clear" />
        <span class="mt-error-key">Error message</span>
        <label for="new-engine-name">Engine name<sup>*</sup></label>
        <input class="required" id="new-engine-name" placeholder="here" />
        <div class="provider-data">
            <div class="provider-field">
                <label>Key<sup>*</sup></label>
                <input class="required" data-field-name="secret" placeholder="here" />
            </div>
        </div>
    </template>

    <template id="mt-provider-apertium-msg">
        <p><strong>Apertium</strong> is a free/open-source platform for rule-based machine
            translation systems. It is aimed at related-language pairs, i.e.
            Spanish and Portuguese, Norwegian Nynorsk and Norwegian Bokmål or
            Kazakh and Tatar. We provide you with all language pairs released in
            the platform, but please take into account that not all of them are
            useful for postediting. A rule of thumb: the closer the languages,
            the better the performance.</p>
        <p><strong>Apertium</strong> is superfast, fully customisable and
            very good for closely-related languages. Don't think twice and
            contact us if you want to try it out integrated in MateCat!</p>
        <p>More info on <a href="http://wiki.apertium.org/wiki/Main_Page"
                           title="Apertium">http://wiki.apertium.org/wiki/Main_Page</a></p>
        <a href="mailto:info@prompsit.com" class="continuebtn btn-ok">Contact Prompsit</a>
    </template>
    <!-- fine blocco apertium -->
</div>

<div metal:define-macro="template-altlang">
    <!-- inizio blocco altlang -->
    <template id="mt-provider-altlang-fields">
        <p>Fill out the form with the connection data to your own AltLang MT system.</p>
        <p class="required pull-left"><sup>*</sup> Required fields.</p>
        <br class="clear" />
        <span class="mt-error-key">Error message</span>
        <label for="new-engine-name">Engine name<sup>*</sup></label>
        <input class="required" id="new-engine-name" placeholder="here" />
        <div class="provider-data">
            <div class="provider-field">
                <label>Key<sup>*</sup></label>
                <input class="required" data-field-name="secret" placeholder="here" />
            </div>
        </div>
    </template>

    <template id="mt-provider-altlang-msg">
        <p><strong>AltLang</strong> is a language variant converter. It
            automatically replaces the existing differences between two
            varieties of the same language. By perfoming only the necessary
            changes, AltLang reliably adapts content from one variety to another
            in seconds. A quick review of the changes and the work is done!</p>
        <p>The main phenomena covered by <strong>AltLang</strong> include vocabulary, syntax,
            spelling, style (i.e. different use of punctuation, dates and hour
            formats, etc.) as well as other socio-linguistic differences. It
            currently supports English, French, Spanish and Portuguese language
            variants.</p>
        <p><strong>AltLang</strong> is really fast, fully customisable,
            smart and accurate. Give it a try inside MateCat!</p>
        <p>More info on <a href="http://www.altlang.net/"
                           title="AltLang">http://www.altlang.net/</a></p>
        <a href="mailto:info@altlang.net" class="continuebtn btn-ok">Contact AltLang</a>
    </template>
    <!-- fine blocco altlang -->
</div>

<div metal:define-macro="template-smartmate">
    <!-- inizio blocco altlang -->
    <template id="mt-provider-smartmate-fields">
        <p>Fill out the form with the connection data to your own SmartMATE system.</p>
        <p class="required pull-left"><sup>*</sup> Required fields.</p>
        <br class="clear" />
        <span class="mt-error-key">Error message</span>
        <label for="new-engine-name">Engine name<sup>*</sup></label>
        <input class="required" id="new-engine-name" placeholder="here" />
        <div class="provider-data">
            <div class="provider-field">
                <label for="user-name">User<sup>*</sup></label>
                <input class="required" data-field-name="client_id" id="user-name" placeholder="here" />
            </div>
            <div class="provider-field">
                <label>Key<sup>*</sup></label>
                <input class="required" data-field-name="secret" placeholder="here" />
            </div>
        </div>
    </template>

    <template id="mt-provider-smartmate-msg">
        <p><strong>SmartMATE</strong> is the software toolkit created by Capita TI that creates, manages and hosts MT engines,
            solutions and services. Finely tuned on our client’s data, SmartMATE engines can be used as an additional
            productivity tool in the localization process, as well as used to produce a fully automated translation
            used for gisting purposes.</p>
        <p>Based on the MOSES statistical machine translation model, <strong>SmartMATE</strong> has been developed as a secure environment,
            offering customers a viable and cost-effective alternative to publicly available machine translation solutions.</p>
        <p>More info on <a href="https://www.smartmate.co/"
                           title="SmartMATE">https://www.smartmate.co/</a></p>
        <a href="mailto:enquiries@smartmate.co" class="continuebtn btn-ok">Contact SmartMATE</a>
    </template>
    <!-- fine blocco altlang -->
</div>
