<!DOCTYPE HTML>
<html lang="en">
    <head>
        <meta charset="utf-8"/>
        <title>Volume Analysis - MateCat</title>
        <meta name="description" content="MateCat allows you to get more matches than any other CAT tool."/>
        <meta name="viewport" content="width=device-width"/>
        <link href="${basepath}public/css/common.css?build=${build_number}" rel="stylesheet" type="text/css" />
        <link rel="stylesheet" href="${basepath}public/css/analyze.css?build=${build_number}"/>
        <link rel="stylesheet" href="${basepath}public/css/popup.css?build=${build_number}"/>

        <script type="text/javascript">
            var config = {
                basepath: '${basepath | string:/}',
                status: '${project_status}',
                totalSegments: '${num_segments}',
                totalAnalyzed: '${num_segments_analyzed}',
                isLoggedIn: '${isLoggedIn}',
                showModalBoxLogin: '${showModalBoxLogin}'
            };
        </script>

        <script type="text/javascript" src="${basepath}public/js/lib/jquery.js"></script>
        <script type="text/javascript" src="${basepath}public/js/lib/jquery-ui.js"></script>
        <script type="text/javascript" src="${basepath}public/js/common.js?build=${build_number}"></script>
        <script type="text/javascript" src="${basepath}public/js/analyze.js?build=${build_number}"></script>
        <script type='text/javascript' src="${basepath}public/js/login.js?build=${build_number}"></script>
        <script type='text/javascript' src="${basepath}public/js/logout.js?build=${build_number}"></script>
        
    </head>


    <body>
        <div tal:condition="true:project_not_found" metal:use-macro="unsupported_browser.html/project_not_found"/>
        <header>
            <div class="wrapper"> 
                <a  href="${basepath}"  class="logo"></a>
            </div>
        </header>

    <content tal:condition="not:project_not_found"  >
        <div class="loadingbar">

            <div class="wrapper" id="shortloading">
                <p class="label">Fast word counting...</p>

            </div>

            <div class="cl"></div>

            <div class="wrapper" id="longloading">
                <p>Searching for TM matches <span class="detailss">(<span id="analyzedSegmentsReport">0</span> of <span id="totalSegmentsReport">0</span> segments)...</span></p>
                <div class="meter">
                    <a href="#" class="approved-bar" title="Analyzing 0.0%"></a>
                    <a href="#" id="close">close</a>
                </div>

            </div>
        </div>

<div class="wrapper-container">
        <div class="wrapper" >
            <h1 id="pid" title=""  data-pid="" tal:attributes="title pname|default; data-pid pid" ><span id="pname" tal:content="pname|nothing">Project name</span> - Volume Analysis</h1>

            <h2>Invoicing Tips</h2>
            <ul id="standard-equivalent-words" class="cost-table">

                <li class="box"><span class="word-number loading" tal:content="standard_analysis_wc_print"> </span><br/>
                    Standard equivalent* words<br/>
                    <span class="days">
                        <strong>
                            <span class="workDays" tal:content="standard_wc_time">11,5</span> work 
                            <span class="unit" tal:content="standard_wc_unit">days</span>
                        </strong> at 
                        <span class="wordPerDay">3.000 w/day</span>
                    </span>
                </li>
                <!--
                <li class="desc">Trados analysis does not handle internal partial matches, machine translation, collaborative TMs like MyMemory and 100% in-context matches. 
                </li>
                -->

            </ul>

            <ul id="matecat-equivalent-words" class="cost-table costbig">

                <li class="box payable">
                    <p class="promo-text">
                        <span>16</span>%<br/>less
                    </p>
                    <span class="word-number loading" tal:content="tm_analysis_wc_print"></span><br/>
                    MateCat equivalent words<br/>
                    <span class="days">
                        <strong>
                            <span class="workDays" tal:content="fast_wc_time">9,5</span> work 
                            <span class="unit" tal:content="fast_wc_unit">days</span>
                        </strong> at 
                        <span class="wordPerDay">3.000 w/day</span>
                    </span>
                </li>
                <!-- <li class="desc">This is what MateCat reccomends you to use to estimate costs and delivery dates. 
               Payable words reppresent an estimation of the real effort required for the project. <a href="#" id="more" class="more">+</a>
               <div class="content">
               
               This is what MateCat reccomends you to use to estimate costs and delivery dates. Payable words reppresent an estimation of the real effort required for the project. eg. 100 repeated words are more like 30 new words to translate. To estimate fair payable %, MateCat use aggregated statistics on translator performance and/or industry accepted discount levels. MT payable % strictly depends on the language pair.											
               
               </div></li>-->
            </ul>

            <ul id="raw-words" class="cost-table">
                <li class="box"><span class="word-number" tal:content="total_raw_word_count_print">40,500</span><br/>
                    Raw words<br/>
                    <span class="days">
                        <strong>
                            <span class="workDays" tal:content="raw_wc_time">11,5</span> work 
                            <span class="unit" tal:content="raw_wc_unit">days</span>
                        </strong> at 
                        <span class="wordPerDay">3.000 w/day</span>
                    </span>
                </li>

                <!--
                <li class="desc">The total words without any repetition discount.</li>
                -->
            </ul>
            <div class="cl"></div>

            <p class="short-message"   >MateCat lets you re-use repeated content better. <br/>
                MateCat leverages MyMemory, Professional Machine Translation and internal fuzzy matches to make you save money and have a faster turnaround.
                <br />*Equivalent words is how the industry count words after discounting repetition and matches against a desktop translation memory. Like Trados would have done. <!--<a href="">Learn More</a>.-->
            </p>

            <br/>
            <br/>


<!--
            <div class="billed-message">MateCat usage fee is <strong>$<span id="usageFee">86.25</span></strong> for this project ($<span id="pricePerWord">0.003</span> per word). 
                <br /><small style="font-size: 10pt">Translate for free. You pay only when you download the completed translation.
                    <br />Using MateCat you are <strong>saving aprox. $<span id="discount">600</span></strong> (<span id="totalFastWC">34,350</span> - <span id="totalTMWC">28,000</span> words at $0.10 per word) thanks to the more matches leveraged.</small></div>
-->
            <br/>


            <br/>
            <div class="cl"></div>
            <!--  
            <a href="#" class="details more-table">Warning: 5 of 17 files analysed are missing</a>
            -->


            <!-- The file upload form used as target for the file upload widget -->

            <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload -->
            <!-- The loading indicator is shown during file processing -->
            <!-- The table listing the files available for upload/download -->
            <table class="upload-table content-table" role="presentation">
                <tr>

                    <td class="preview">
                        <img src="/public/img/xliff-icon-retina.png" width="30" height="29"/>        </td>
                    <td class="name">esempio.xliff</td>
                    <td class="size"><span>0.90 KB</span></td>
                    <td colspan="2">0 word found</td>

                    <td>          </td>
                </tr>
                <tr>

                    <td class="preview">
                        <img src="/public/img/xliff-icon-retina.png" width="30" height="29"/>        </td>
                    <td class="name">esempio.xliff</td>
                    <td class="size"><span>0.90 KB</span></td>
                    <td colspan="2">0 word found</td>

                    <td>          </td>
                </tr>
                <tr>

                    <td class="preview">
                        <img src="/public/img/xliff-icon-retina.png" width="30" height="29" />        </td>
                    <td class="name">esempio.xliff</td>
                    <td class="size"><span>0.90 KB</span></td>
                    <td colspan="2">0 word found</td>

                    <td>          </td>
                </tr>
                <tr>

                    <td class="preview">
                        <img src="/public/img/xliff-icon-retina.png" width="30" height="29" />        </td>
                    <td class="name">esempio.xliff</td>
                    <td class="size"><span>0.90 KB</span></td>
                    <td colspan="2">0 word found</td>

                    <td>          </td>
                </tr>
                <tr>

                    <td class="preview">
                        <img src="/public/img/xliff-icon-retina.png" width="30" height="29"/>        </td>
                    <td class="name">esempio.xliff</td>
                    <td class="size"><span>0.90 KB</span></td>
                    <td colspan="2">0 word found</td>

                    <td>          </td>
                </tr>
            </table>
            <!-- .upload-footer -->

            <div class="cl"></div>
        </div> 



</div>

        <div class="body">
            <div class="wrapper">
                <h2>Job details</h2>      
                <tal:block tal:define="job php:array()" tal:repeat="job jobs">
                    <h3>
                        <span tal:replace="job/source">English</span> &gt; <span tal:replace="job/target">Italian</span>
                    </h3>   
                    <div class="splitbtn-cont">
                      	<span class="splitmsg">Splitted in 2 parts</span><!-- A: questo compare quando il job è già stato splittato  -->
                        <span class="label left">Split in</span>
                         <select name="" id="splitselect">
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9">3</option>
                            <option value="10">10</option>
                         </select>
     				 	<span class="label left">Jobs</span>
                        <a tal:attributes="" href="#" class="splitbtn">Split</a>
						<a tal:attributes="" href="#" class="mergebtn">Merge</a><!-- A: questo compare quando il job è già stato splittato  -->
                    </div>    <!-- END CONTAINER SPLIT JOBS BUTTONS  -->
                    <table tal:attributes="id string:job-${repeat/job/key}" class="tablestats">
                        <tr>
                            <th> </th>
                            <th>Payable</th>
                            <th>Total</th>
                            <th class="new" width="100">New</th>
                            <th class="repetition">Repetition</th>
                            <th class="internal-matches">Internal Matches<br/>
                                (75%-99%)</th>
                            <th class="tm-partial">TM<br/>
                                Partial (75%-99%)</th>
                            <th class="tm-100">TM 100%</th>
                            <th class="tm-100-context">TM 100% in context</th>
                            <th class="mt">Machine Translation</th>
                            <th class="empty">&nbsp;</th>
                        </tr>

                        <tr>


                            <td class="payable-rate-breakdown" colspan="3">Payable Rate Breakdown</td>
                            <td class="editarea">100%</td>
                            <td class="editarea">30%</td>
                            <td class="editarea">60%</td>
                            <td class="editarea">60%</td>
                            <td class="editarea">30%</td>
                            <td class="editarea">0%</td>
                            <td class="editarea">85%</td>
                            <td class="empty">&nbsp;</td>
                        </tr>

                        <tr class="tablespace">
                            <td colspan="10">&nbsp;</td>
                        </tr>
                        <tr class="totaltable">
                            <td class="languages">
                             <span class="splitnum left">${repeat/job/key}-1</span>
<!-- A: occorre inserire sempre l'ID del job; se è splittato bisogna anche accompagnarlo con il numero progressivo di split  -->
                                <a href="#" class="filedetails part3">File details</a>
                                <span class="numfiles">(<span tal:define="files job/files; f php:array()" tal:content="php:count(files)">0</span>)</span>
                            </td>
                            <td class="stat-payable">
                                <strong class="stat_tot" tal:content="tm_analysis_wc_print">11,500</strong>                            </td>
                            <td class="stat-total" tal:content="job/total_raw_word_count_print">13,500</td>
                            <td class="stat_new">0</td>
                            <td class="stat_rep">0</td>
                            <td class="stat_int">0</td>
                            <td class="stat_tm75">0</td>
                            <td class="stat_tm100">0</td>
                            <td class="stat_tmic">0</td>
                            <td class="stat_mt">0</td>
                            <td class="empty">
                          
   
  
                                <a tal:attributes="href string:${basepath}translate/${pname}/${job/source_short}-${job/target_short}/${repeat/job/key}-${job/password} " href="#" target="_blank" class="uploadbtn">Translate</a>
                            </td>
                        </tr>
                        <tal:block tal:define="files job/files; f php:array()" tal:repeat="f files">
                            <tr tal:attributes="id string:file_${repeat/job/key}_${f/id}" id="file_1703" class="subfile part3files">
                                <td class="stat-name">
                                    <p class="filename" tal:content="f/filename" tal:attributes='title f/filename'>filename1.xliff</p> </td>
                                <td class="stat_payable"><strong tal:content="f/file_eq_word_count">6,500</strong></td>
                                <td class="stat-total" tal:content="f/file_raw_word_count" >7,500</td>
                                <td class="stat_new">0</td>
                                <td class="stat_rep">0</td>
                                <td class="stat_int">0</td>
                                <td class="stat_tm75">0</td>
                                <td class="stat_tm100">0</td>
                                <td class="stat_tmic">0</td>
                                <td class="stat_mt">0</td>
                                <td class="empty"></td>
                            </tr>
                        </tal:block>
                        <!--tr id="file_1704" class="subfile part3files">
                            <td  style="border-left:1px solid #ccc;text-align:left !Important;"><p>filename2.xliff</p> </td>
                            <td ><strong>6,500</strong></td>
                            <td style="text-align:right">7,500</td>
                            <td class="stat_new">0</td>
                            <td class="stat_rep">0</td>
                            <td class="stat_int">0</td>
                            <td class="stat_tm75">0</td>
                            <td class="stat_tm100">0</td>
                            <td class="stat_tmic">0</td>
                            <td class="stat_mt">0</td>
                        </tr -->
                                                <tr class="totaltable">
                            <td class="languages">
                            <span class="splitnum left">${repeat/job/key}-2</span>
                                <a href="#" class="filedetails part3">File details</a>
                                <span class="numfiles">(<span tal:define="files job/files; f php:array()" tal:content="php:count(files)">0</span>)</span>
                            </td>

                            <td class="stat-payable">
                                <strong class="stat_tot" tal:content="tm_analysis_wc_print">11,500</strong>                            </td>
                            <td class="stat-total" tal:content="job/total_raw_word_count_print">13,500</td>
                            <td class="stat_new">0</td>
                            <td class="stat_rep">0</td>
                            <td class="stat_int">0</td>
                            <td class="stat_tm75">0</td>
                            <td class="stat_tm100">0</td>
                            <td class="stat_tmic">0</td>
                            <td class="stat_mt">0</td>
                            <td class="empty">
                          
   
  
                                <a tal:attributes="href string:${basepath}translate/${pname}/${job/source_short}-${job/target_short}/${repeat/job/key}-${job/password} " href="#" target="_blank" class="uploadbtn">Translate</a>
                            </td>
                        </tr>
                        <tal:block tal:define="files job/files; f php:array()" tal:repeat="f files">
                            <tr tal:attributes="id string:file_${repeat/job/key}_${f/id}" id="file_1703" class="subfile part3files">
                                <td class="stat-name">
                                    <p class="filename" tal:content="f/filename" tal:attributes='title f/filename'>filename1.xliff</p> </td>
                                <td class="stat_payable"><strong tal:content="f/file_eq_word_count">6,500</strong></td>
                                <td class="stat-total" tal:content="f/file_raw_word_count" >7,500</td>
                                <td class="stat_new">0</td>
                                <td class="stat_rep">0</td>
                                <td class="stat_int">0</td>
                                <td class="stat_tm75">0</td>
                                <td class="stat_tm100">0</td>
                                <td class="stat_tmic">0</td>
                                <td class="stat_mt">0</td>
                                <td class="empty"></td>
                            </tr>
                        </tal:block>
                        <!--tr id="file_1704" class="subfile part3files">
                            <td  style="border-left:1px solid #ccc;text-align:left !Important;"><p>filename2.xliff</p> </td>
                            <td ><strong>6,500</strong></td>
                            <td style="text-align:right">7,500</td>
                            <td class="stat_new">0</td>
                            <td class="stat_rep">0</td>
                            <td class="stat_int">0</td>
                            <td class="stat_tm75">0</td>
                            <td class="stat_tm100">0</td>
                            <td class="stat_tmic">0</td>
                            <td class="stat_mt">0</td>
                        </tr -->
                                                <tr class="totaltable">
                            <td class="languages">
                             <span class="splitnum left">${repeat/job/key}-3</span>
                                <a href="#" class="filedetails part3">File details</a>
                                <span class="numfiles">(<span tal:define="files job/files; f php:array()" tal:content="php:count(files)">0</span>)</span>
                            </td>

                            <td class="stat-payable">
                                <strong class="stat_tot" tal:content="tm_analysis_wc_print">11,500</strong>                            </td>
                            <td class="stat-total" tal:content="job/total_raw_word_count_print">13,500</td>
                            <td class="stat_new">0</td>
                            <td class="stat_rep">0</td>
                            <td class="stat_int">0</td>
                            <td class="stat_tm75">0</td>
                            <td class="stat_tm100">0</td>
                            <td class="stat_tmic">0</td>
                            <td class="stat_mt">0</td>
                            <td class="empty">
                          
   
  
                                <a tal:attributes="href string:${basepath}translate/${pname}/${job/source_short}-${job/target_short}/${repeat/job/key}-${job/password} " href="#" target="_blank" class="uploadbtn">Translate</a>
                            </td>
                        </tr>
                        <tal:block tal:define="files job/files; f php:array()" tal:repeat="f files">
                            <tr tal:attributes="id string:file_${repeat/job/key}_${f/id}" id="file_1703" class="subfile part3files">
                                <td class="stat-name">
                                    <p class="filename" tal:content="f/filename" tal:attributes='title f/filename'>filename1.xliff</p> </td>
                                <td class="stat_payable"><strong tal:content="f/file_eq_word_count">6,500</strong></td>
                                <td class="stat-total" tal:content="f/file_raw_word_count" >7,500</td>
                                <td class="stat_new">0</td>
                                <td class="stat_rep">0</td>
                                <td class="stat_int">0</td>
                                <td class="stat_tm75">0</td>
                                <td class="stat_tm100">0</td>
                                <td class="stat_tmic">0</td>
                                <td class="stat_mt">0</td>
                                <td class="empty"></td>
                            </tr>
                        </tal:block>
                        <!--tr id="file_1704" class="subfile part3files">
                            <td  style="border-left:1px solid #ccc;text-align:left !Important;"><p>filename2.xliff</p> </td>
                            <td ><strong>6,500</strong></td>
                            <td style="text-align:right">7,500</td>
                            <td class="stat_new">0</td>
                            <td class="stat_rep">0</td>
                            <td class="stat_int">0</td>
                            <td class="stat_tm75">0</td>
                            <td class="stat_tm100">0</td>
                            <td class="stat_tmic">0</td>
                            <td class="stat_mt">0</td>
                        </tr -->
                    </table>
                  
                </tal:block>
<!--
                <div class="sendit">
                    <a href="#" class="uploadbtn split" style="float:right">Split / Merge</a>    
                    <div class="cl"></div>
                    <div class="job">

                        <p> Job #1 link:</p>  
                        <input name="" type="text" class="input" value="mat.ly/IUrHPU "/> 
                        <input type="text" class="input" value="200" size="2"/> 
                        <p>words</p> <a href="#" class="uploadbtn add" title="split more">+</a> 
                    </div>
                    <div class="cl"></div>
                </div>
-->
</div> <div class="cl"></div>
        </div>

<div class="grayed"></div>
        
<div class="modal popup-split" data-type="view">
    <div class="popup-outer"></div>
    <div class="popup">
        <a href="#" class="x-popup"></a>

        <h1>Split Job</h1>
        <div class="popup-box split-box3">
				<ul class="jobs">
                <li>
                    <div><h4>Part 1</h4></div>

                    <div class="job-details">
                        <div class="job-perc"><p><span class="aprox">Aprox. words:</span><span class="correct none">Words:</span></p>
<!-- A: la classe Aprox scompare se viene effettuato il calcolo -->
                            <input type="text" class="input-small" value="50.000" /> 
                        </div>
                    </div>
                </li>
                <li>
                    <div><h4>Part 2</h4></div>
                    <div class="job-details">
                        <div class="job-perc"><p><span class="aprox">Aprox. words:</span><span class="correct none">Words:</span></p>
<!-- A: la classe Aprox scompare se viene effettuato il calcolo -->
                                      <input type="text" class="input-small" value="50.000" /> 
                        </div>
                    </div>
                </li>
            </ul>
          <div class="total">
                <p class="wordsum">Total payable words:<strong>200.000</strong></p>
                <p class="error-count minus none">Words remaining:<strong>20.000</strong></p>
                <p class="error-count plus none">Words exceeding:<strong>20.000</strong></p>
<!-- A:  il p error appare solo se i valori inseriti negli input dei singoli split job non restituiscono la somma totale -->       
          </div>
          <div class="error-message none">
                <p>Cannot split in # chunks, do this</p>
          </div>
          <div class="cl"></div>
          <div class="btnsplit">
           
				<a class="uploadbtn loader">
<!-- A: se il conteggio delle parole non è corretto, bisogna appendere la classe 'disabled' al bottone qui sopra -->
                   <span class="uploadloader"></span>
                    <span id="text" onClick="conteggio()">Check</span>
<!-- A:  la funzione conteggio adesso funziona in timeout, va sostituita con i controlli -->
				</a>
                <a class="splitbtn done none">
                    <span id="text">Confirm</span>
                </a>



                <span class="btn fileinput-button btn-cancel right">
                    <span>Cancel</span>
                </span>
			</div>
		</div><!-- END DIV SPLIT BOX -->
	</div><!-- END DIV POPUP-SPLIT INTERNO -->
</div><!-- END DIV POPUP-SPLIT -->
        
        
        


</content>

    <footer>
        <div class="wrapper">

            <nav>
                <ul>
                    <li><a tal:attributes="href string:${basepath}manage/">Manage</a></li>
                </ul>

                <tal:block tal:condition="php: empty(logged_user)">
                    <div id='welcomebox'>
                        <span>Anonymous</span> (<a id='loginlink' tal:attributes="href incomingUrl">login</a>)
                    </div>
                </tal:block>

                <tal:block tal:condition="php: !empty(logged_user)">
                    <div id='welcomebox'>
                        <span tal:content='logged_user'></span> (<a id='logoutlink' href='#'>logout</a>)
                    </div>
                </tal:block>

            </nav>

        </div>
    </footer>

	<!-- POPUP LOGIN -->
	<div id='popupWrapper' >
		<div class="popup-outer"></div>
		<div class="popup">
	
			<a href="#" class="x-popup"></a>
			<h1>Login</h1>
	
			<h2>
				Log in to add the project to your management panel.<br />If the project is not added, you will not be able to retrieve the URL.
			</h2>
	
			<div class="outer">
				<div class="inner">
					<button id="sign-in" name="" type="button" class="login-button"
						data-oauth="${hostpath}/oauth/request?v2">Sign
						in using Google</button>
				</div>
			</div>
			<br /> Or <br />
			<a href="#" class="anonymous"> Stay anonymous</a>
	
		</div>
	</div>
	<!-- FINE POPUP LOGIN -->
    <!-- JS SPLIT JOB  -->
<script type="text/javascript">
<!-- A: fa apparire la modale  -->
$(function(){
    $('.splitbtn').click(function() {
        $('.grayed').toggleClass('visible');
		$('.popup-split').toggleClass('visible');
		
    });
});
<!-- A: fa scomparire la modale  -->
$(function(){
    $('.x-popup').click(function() {
        $('.grayed').removeClass('visible');
		$('.popup-split').removeClass('visible');
	});
	$('.popup-outer').click(function() {
        $('.grayed').removeClass('visible');
		$('.popup-split').removeClass('visible');
    });
	$('.btn-cancel').click(function() {
		$('.grayed').removeClass('visible');
		$('.popup-split').removeClass('visible');
	});
});

<!-- A: fa apparire il bottone loading  -->

$(function(){
    $('.loader').click(function() {
        $(this).toggleClass('disabled');
		 $('.uploadloader').toggleClass('visible');
		$('#text').text('Checking');
    });
	
	
<!-- A: fa scomparire il bottone loading  -->
	
	$('input').onChange(function() {
		$('this').prop('disabled', true);
    });
});

<!-- A: funziona da sostituire con i controlli  -->

var timer;

function conteggio(){
    timer = setTimeout(function(){
      $('#text').text('Confirm');
$('.loader').toggleClass('none');
$('.done').removeClass('none');
$('.aprox').toggleClass('none');
$('.correct').removeClass('none');
$('.error-message').toggleClass('none');
$('.error-count').toggleClass('none');
},2000);

 }

$('.btn-cancel').click(function(){
    // Clear the timeout
    clearTimeout(timer);
});
</script>

<!-- FINE JS SPLIT JOB -->
	<script src="${basepath}public/js/lib/snapengage.js"></script>

</body> 
</html>
