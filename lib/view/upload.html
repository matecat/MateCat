<!DOCTYPE HTML>
<!--
/*
 * jQuery File Upload Plugin Demo 6.9.1
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2010, Sebastian Tschant
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
-->
<html lang="en">
<head>


    <!-- Force latest IE rendering engine or ChromeFrame if installed -->
    <!--[if IE]>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><![endif]-->
    <meta charset="utf-8"/>
    <title tal:condition="true:conversion_enabled">Translate a file with Matecat</title>
    <title tal:condition="not:conversion_enabled">Translate an XLIFF file with Matecat</title>

    <meta name="description" content="Matecat allows you to get more matches than any other CAT tool."/>
    <meta name="viewport" content="width=device-width"/>
    <!-- jQuery UI styles -->
    <!--
    <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/themes/base/jquery-ui.css" id="theme"/>
    -->


    <link href="${basepath}public/css/common.css?build=${build_number}" rel="stylesheet" type="text/css"/>
    <link rel="stylesheet" href="${basepath}public/css/upload.css?build=${build_number}"/>
    <link rel="stylesheet" href="${basepath}public/js/lib/colorbox/colorbox.css?build=${build_number}"/>

    <!-- Shim to make HTML5 elements usable in older Internet Explorer versions -->
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

<!--        <script src="${basepath}public/js/lib/jquery-1.11.0.min.js"></script>
    <script src="${basepath}public/js/lib/jquery-migrate-1.2.1.js"></script> -->
	<script src="${basepath}public/js/lib/jquery.js"></script>
	<script src="${basepath}public/js/common.js"></script>
	<script src="${basepath}public/js/upload.js"></script>
	<script src="${basepath}public/js/addtablerow.js"></script>
	<script type='text/javascript' src="${basepath}public/js/logout.js?build=${build_number}"></script>

    <script type="text/javascript">
        var config = {
            basepath: '${basepath | string:/}',
            hostpath: '${hostpath | string:/}',
            unsupportedFileTypes: '${unsupported_file_types}',
            allowedFileTypes: /(\.|\/)(${allowed_file_types})$/i,
            conversionEnabled: ${conversion_enabled},
            analysisEnabled: ${volume_analysis_enabled},
            maxFileSize: ${maxFileSize},
            maxNumberFiles: ${maxNumberFiles}
        };
    </script>


</head>
<body tal:condition="not:supportedBrowser">
<div metal:use-macro="unsupported_browser.html/unsupported"/>
</body>
<body tal:condition="supportedBrowser" class="started">

<header>
    <div class="wrapper">
        <a href="${basepath}" class="logo"></a>

    </div>
<div class="cl"></div>
</header>


<div class="wrapper-upload">
<h1 tal:condition="true:conversion_enabled">Translate your files</h1>
<h1 tal:condition="not:conversion_enabled">Translate an XLIFF file</h1>

<h2 class="payoff">Matecat gives you more matches than any other translation tool.</h2>


<div class="translate-box">
    <h2>Project name</h2>
    <input name="project-name" type="text" class="upload-input" id="project-name" autofocus="autofocus"/>
</div>

<div class="translate-box source">
    <h2>From</h2>
    <select name="source-lang" id="source-lang">
        <tal:block tal:define="language php:array()" tal:repeat="language sourceLangHistory">
            <option class="custom" tal:condition="language/selected" selected="selected" tal:attributes="value language/code" tal:content="language/name"></option>
            <option class="custom" tal:condition="not:language/selected" tal:attributes="value language/code" tal:content="language/name"></option>
        </tal:block>

        <option class="separator" disabled="disabled">---</option>

        <tal:block tal:repeat="language source_languages">
            <option tal:condition="php: (noSourceLangHistory EQ 'false')&&(language['code'] EQ 'en-US')" selected="selected" tal:attributes="value language/code" tal:content="language/name">
                ---
            </option>
            <option tal:condition="php: (noSourceLangHistory NE 'false')&&(language['code'] EQ 'en-US')" tal:attributes="value language/code" tal:content="language/name">
                ---
            </option>
            <option tal:condition="php: language['code'] NE 'en-US'" tal:attributes="value language/code" tal:content="language/name">
                ---
            </option>
        </tal:block>
    </select>
</div>

<a id="swaplang" title="Swap languages" href="#">Swap languages</a>

<div class="translate-box target">
    <h2>To</h2>
    <select name="target-lang" id="target-lang">
        <tal:block tal:define="language php:array()" tal:repeat="language targetLangHistory">
            <option class="custom" tal:condition="language/selected" selected="selected" tal:attributes="value language/code" tal:content="language/name"></option>
            <option class="custom" tal:condition="not:language/selected" tal:attributes="value language/code" tal:content="language/name"></option>
        </tal:block>

        <option class="separator" disabled="disabled">---</option>

        <tal:block tal:repeat="language target_languages">
            <option tal:condition="php: (noTargetLangHistory EQ 'false')&&(language['code'] EQ 'fr-FR')" selected="selected" tal:attributes="value language/code" tal:content="language/name">
                ---
            </option>
            <option tal:condition="php: (noTargetLangHistory NE 'false')&&(language['code'] EQ 'fr-FR')" tal:attributes="value language/code" tal:content="language/name">
                ---
            </option>
            <option tal:condition="php: language['code'] NE 'fr-FR'" tal:attributes="value language/code" tal:content="language/name">
                ---
            </option>
        </tal:block>

    </select>
    <br/>
    <a href="#" id="multiple-link">Multiple languages?</a>
</div>
<div class="cl"></div>

        <a href="#" class="more">Options</a>
<div class="cl"></div>


<div class="cl"></div>
<div class="advanced-box">
    <div class="cl"></div>
    <div class="translate-box">
        <h2>Machine Translation</h2>
        <select name="mt_engine" id="mt_engine" tal:define="mt_engine php:array()">
            <option value="0" >NONE</option>
            <option value="1" selected="selected">MyMemory (All Pairs)</option>
            <tal:block tal:repeat="mt_engine mt_engines">
                <option value="--" tal:attributes="value mt_engine/id" tal:content="mt_engine/name">---</option>
            </tal:block>
        </select>
    </div>

    <div class="translate-box">
        <h2>Private TM key</h2>
        <input name="private-tm-key" type="text" class="upload-input" id="private-tm-key"/>
        <input name="private-tm-user" type="hidden" id="private-tm-user"/>
        <input name="private-tm-pass" type="hidden" id="private-tm-pass"/>
    </div>

    <div class="translate-box">
        <span class="btn btn-success fileinput-button" id="create_private_tm_btn">
            <span>Create</span>
            <input id="private-tm-new" type="file" name="files[]" multiple="multiple" class="multiple-button"/>
        </span>
    </div>
       



  
     <div class="translate-box">
     <h2 class="resource" style="display:none;">4 Resources selected</h2>

            <a href="#" class="memory-mgmt btn btn-success pull-left"><i class="icon-language"></i>Manage language resources</a>
    </div>
    <div class="cl"></div>

      <div class="translate-checkbox">
        <span class="tms-checkbox" id="disable_tms_checkbox">
            <label class="tms-label" for="disable_tms_engine">Disable TM, Concordance and Glossary</label>
            <input type="checkbox" value="true" id="disable_tms_engine" name="no_tms_engine" />
        </span>
    </div>

    <img id='get-new-tm-spinner' alt="Loading..." src="public/img/loader.gif" class="tm-button"/>

</div>


<div class="cl"></div>
<p class="warning-message"> Error: the errmsg will appear here... </p>
<p class="error-message"> Error: the errmsg will appear here... </p>

<div class="cl"></div>
<div class="upload-files drag">

    <form id="fileupload" action="${basepath}lib/utils/fileupload/" method="POST" enctype="multipart/form-data">

        <div id="overlay"></div>
        <div id="droptest">

            <p tal:condition="true:conversion_enabled" class="file-drag">
                <strong>Drag and drop</strong> your file here<br/>
				<span class="min">You may also import your own translation memories (TMX)</span><br />
                or</p>

            <p tal:condition="not:conversion_enabled" class="file-drag">
                <strong>Drag and drop</strong> your XLIFF here<br/>
                or</p>

            <p class="file-drop">
                <strong>Drop it</strong> here.
            </p>

            <div class="container">
                <!-- The file upload form used as target for the file upload widget -->

                <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload -->
                <div class="row fileupload-buttonbar">
                    <div class="span7">
                        <!-- The fileinput-button span is used to style the file input field as button -->
                                    <span class="btn btn-success fileinput-button">
                                       
                                        <span>Add files...</span>
                                        <input type="file" name="files[]" multiple="multiple" class="multiple-button"/>
                                    </span>
                        <!--
                                        <button type="submit" class="btn btn-primary start">
                                            <i class="icon-upload icon-white"></i>
                                            <span>Start upload</span>
                                        </button>
                                        <button type="reset" class="btn btn-warning cancel">
                                            <i class="icon-ban-circle icon-white"></i>
                                            <span>Cancel upload</span>
                                        </button>
                                        <button type="button" class="btn btn-danger delete">
                                            <i class="icon-trash icon-white"></i>
                                            <span>Delete</span>
                                        </button>
                                        <input type="checkbox" class="toggle"/>
                        -->
                    </div>
                    <!-- The global progress information -->
                    <div class="span5 fileupload-progress fade">
                        <!-- The global progress bar -->
                        <div class="progress progress-success progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100">
                            <div class="bar" style="width:0%;"></div>
                        </div>
                        <!-- The extended global progress information -->
                        <div class="progress-extended">&nbsp;</div>
                    </div>
                </div>
                <!-- The loading indicator is shown during file processing -->
                <div class="fileupload-loading"></div>
                <!-- The table listing the files available for upload/download -->
                <table cellpadding="0" cellspacing="0" class="upload-table table-striped" role="presentation">
                    <tbody class="files" data-toggle="modal-gallery" data-target="#modal-gallery"></tbody>
                </table>

                <!--
                <div class="upload-footer">
                            <p>Continue to drag and drop your XLIFF here or    </p>

                    <span class="btn btn-success fileinput-button">
                <i class="icon-plus icon-white"></i>
                <span>Add files...</span>
                <input type="file" name="files[]" multiple="multiple" class="multiple-button"/>
                    </span>

                    <div class="cl"></div>
                </div>
                -->

                <!-- .upload-footer -->

                <div class="cl"></div>

            </div>
            <!-- #container -->


        </div>


        <div class="cl"></div>

        <div class="btncontinue">
            <p tal:condition="true:conversion_enabled"><strong>Drag and drop</strong> your file here or </p>

            <p tal:condition="not:conversion_enabled"><strong>Drag and drop</strong> your XLIFF here or </p>
                        <span id="add-files" class="btn fileinput-button">
                            <span>Add files...</span>
                            <input type="file" name="files[]" multiple="multiple" class="multiple-button"/>
                        </span> 
                        <span id="clear-all-files" class="btn fileinput-button cancel-btn">
                            <span>Clear all</span>
                        </span> 
                        <span id="delete-failed-conversions" class="btn fileinput-button cancel-btn">
                            <span>Clear all failed</span>
                        </span>
        </div>
    </form>
</div>
<!-- .upload-files -->
<!--
                        <button type="reset" class="btn btn-warning cancel">
                <i class="icon-ban-circle icon-white"></i>
                <span>Cancel upload</span>
            </button>
-->
<p tal:condition="true:conversion_enabled" class="supported-files">Matecatpro supports
    <a class="supported-file-formats" href="#">${formats_number} file formats</a>.</p>

<div class="uploadbtn-box">
    <span class="uploadloader"></span>
    <input name="" type="button" class="uploadbtn disabled" tal:condition="not:volume_analysis_enabled" value="Translate" disabled="disabled"/>
    <input name="" type="button" class="uploadbtn disabled" tal:condition="volume_analysis_enabled" value="Analyze" disabled="disabled"/>

    <p class="enter">Press Enter</p>
</div>

</div>


<!-- The template to display files available for upload -->
<script id="template-upload" type="text/x-tmpl">
    {% for (var i=0, file; file=o.files[i]; i++) { %}
    <tr class="template-upload fade">
        <td class="preview">
             {% if (typeof(mimeok)=='undefined') {mimeok=0} %}
            {% if (o.files[i].type == "application/msword" || o.files[i].type == "application/vnd.oasis.opendocument.text" || o.files[i].type == " application/x-vnd.oasis.opendocument.text" || o.files[i].type == "application/vnd.openxmlformats-officedocument.wordprocessingml.template"
			|| o.files[i].type == "application/vnd.ms-word.document.macroEnabled.12" || o.files[i].type == "application/vnd.sun.xml.writer" || o.files[i].type == "application/vnd.openxmlformats-officedocument.wordprocessingml.document"
			
			) { %}
            <span class="extdoc"></span>
           
            {% mimeok=1 } %}
			
			{% if (o.files[i].type == "application/vnd.ms-powerpoint" || o.files[i].type == "application/mspowerpoint" || o.files[i].type == "application/ms-powerpoint" || o.files[i].type == "application/mspowerpnt" || o.files[i].type == "application/vnd-mspowerpoint" || o.files[i].type == "application/powerpoint" || o.files[i].type == "application/x-powerpoint" || o.files[i].type == "application/x-m" || o.files[i].type == "application/x-powerpoint" || o.files[i].type == "application/x-mspowerpoint"  || o.files[i].type == "application/x-dos_ms_powerpnt"  || o.files[i].type == "application/pot"  || o.files[i].type == "application/x-soffic" || o.files[i].type == "application/vnd.openxmlformats-officedocument.presentationml.template"  || o.files[i].type == "application/vnd.ms-powerpoint.slideshow.macroEnabled.12" || o.files[i].type == "application/vnd.openxmlformats-officedocument.presentationml.slideshow" || o.files[i].type == "application/vnd.ms-powerpoint.presentation.macroEnabled.12" || o.files[i].type == "application/vnd.openxmlformats-officedocument.presentationml.presentation" || o.files[i].type == "application/vnd.oasis.opendocument.presentation" || o.files[i].type == "application/x-vnd.oasis.opendocument.presentation" || o.files[i].type == "application/vnd.sun.xml.impress") { %}
            <span class="extppt"></span>
            {% mimeok=1} %}
			
			
			{% if (o.files[i].type == "text/plain" || o.files[i].type == "application/txt" || o.files[i].type == "browser/internal" || o.files[i].type == "text/anytext" || o.files[i].type == "widetext/plain" || o.files[i].type == "widetext/paragraph" ) { %}
            <span class="exttxt"></span>
            {% mimeok=1} %}
			
			
			{% if (o.files[i].type == "application/vnd.ms-excel" || o.files[i].type == "application/msexcel" || o.files[i].type == "application/x-msexcel" || o.files[i].type == "application/x-ms-excel" || o.files[i].type == "application/vnd.ms-excel" || o.files[i].type == "application/x-m" || o.files[i].type == "application/x-excel" || o.files[i].type == "application/x-dos_ms_excel"  || o.files[i].type == "application/xls" || o.files[i].type == "application/excel"  || o.files[i].type == "application/xlt" || o.files[i].type == "application/msexcel"  || o.files[i].type == "application/x-msexcel" || o.files[i].type == "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" || o.files[i].type == "application/vnd.oasis.opendocument.spreadsheet" || o.files[i].type == "application/x-vnd.oasis.opendocument.spreadsheet" || o.files[i].type == "application/vnd.sun.xml.calc" || o.files[i].type == "text/comma-separated-values" || o.files[i].type == "text/csv" || o.files[i].type == "application/csv" || o.files[i].type == "application/vnd.msexcel"
			
			
			) { %}
					
            <span class="extxls"></span>
            {% mimeok=1} %}
			
			{% if (o.files[i].type == "text/xml" || o.files[i].type == "application/xml" || o.files[i].type == "application/x-xml" ) { %}
					
            <span class="extxml"></span>
            {% mimeok=1} %}
			
			{% if (o.files[i].type == "text/html" || o.files[i].type == "application/xhtml+xml"  ) { %}
					
            <span class="exthtm"></span>
            {% mimeok=1} %}
			
			{% if (o.files[i].type == "application/vnd.mif" || o.files[i].type == "application/x-framemaker" || o.files[i].type == "application/x-maker"|| o.files[i].type == "application/x-mif"  ) { %}
					
            <span class="extmif"></span>
            {% mimeok=1} %}
			
			 {% if (/idml/.test( o.files[i].name.split('.').pop() ) ) { %}
            <span class="extidd"></span>
            {% mimeok=1} %}
			
			{% if (o.files[i].type == "application/quarkxpress" || o.files[i].type == "application/x-quark-express" ||  /xtg/.test( o.files[i].name.split('.').pop() )) { %}
					
            <span class="extqxp"></span>
            {% mimeok=1} %}
			
		
			
			 {% if (/ttx/.test( o.files[i].name.split('.').pop() ) ) { %}
            <span class="extttx"></span>
            {% mimeok=1} %}
			
			 {% if (/xliff/.test( o.files[i].name.split('.').pop() ) ) { %}
            <span class="extxif"></span>
            {% mimeok=1} %}
			
			 {% if (/xlf/.test( o.files[i].name.split('.').pop() ) ) { %}
            <span class="extxlf"></span>
            {% mimeok=1} %}
			
			 {% if (/rc/.test( o.files[i].name.split('.').pop() ) ) { %}
            <span class="extrcc"></span>
            {% mimeok=1} %}
			
			{% if (/resx/.test( o.files[i].name.split('.').pop() ) ) { %}
            <span class="extres"></span>
            {% mimeok=1} %}
			
			{% if (/sgml/.test( o.files[i].name.split('.').pop() ) ) { %}
            <span class="extsgl"></span>
            {% mimeok=1} %}
			
			{% if (/sgm/.test( o.files[i].name.split('.').pop() ) ) { %}
            <span class="extsgm"></span>
            {% mimeok=1} %}
			
			{% if (/properties/.test( o.files[i].name.split('.').pop() ) ) { %}
            <span class="extpro"></span>
            {% mimeok=1} %}
			
			
				
			
		
			
			{% if (o.files[i].type == "application/pdf" || o.files[i].type == "application/x-pdf" || o.files[i].type == "application/acrobat" || o.files[i].type == "applications/vnd.pdf" || o.files[i].type == "text/pdf" || o.files[i].type == "text/x-pdf") { %}
			
            <span class="extpdf"></span>
            {% mimeok=1} %}
			
			{% if ((typeof(mimeok)=='undefined') || mimeok==0) { console.log(o.files[i].type); %}
			 <span class="extxif"></span>
            {% } %}
			
			
		   
        </td>
        <td class="name"><span>{%=file.name%}</span></td>
        <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
        {% if (file.error) { %}
        <td class="error" colspan="2"><span class="label label-important">{%=locale.fileupload.error%}</span>
            {%=locale.fileupload.errors[file.error] || file.error%}
        </td>
        {% } else if (!i) { %}
        <td>
            <div class="progress progress-success progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
                <div class="bar" style="width:0%;"></div>
            </div>
        </td>
        <td class="start">{% if (!o.options.autoUpload) { %}
            <button class="btn btn-primary">
                <i class="icon-upload icon-white"></i>
                <span>{%=locale.fileupload.start%}</span>
            </button>
            {% } %}
        </td>
        {% } else { %}
        <td colspan="2"></td>
        {% } %}
        <td class="cancel">{% if (!i) { %}
            <button class="btn btn-warning">
                <i class="icon-ban-circle icon-white"></i>
                <span>{%=locale.fileupload.cancel%}</span>
            </button>
            {% } %}
        </td>
    </tr>

    {% } %}

</script>


<!-- The template to display files available for download -->
<script id="template-download" type="text/x-tmpl">
    {% for (var i=0, file; file=o.files[i]; i++) { %}
    <tr class="template-download fade">
        {% if (file.error) { %}
        <td></td>
        <td class="name"><span></span></td>
        <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
        <td class="error" colspan="2"><span class="label label-important">{%=locale.fileupload.error%}</span>
            {%=locale.fileupload.errors[file.error] || file.error%}
        </td>
        {% } else { %}
        <td class="preview">
		     {% if (typeof(mimeok)=='undefined') {mimeok=0} %}
            {% if (o.files[i].type == "application/msword" || o.files[i].type == "application/vnd.oasis.opendocument.text" || o.files[i].type == " application/x-vnd.oasis.opendocument.text" || o.files[i].type == "application/vnd.openxmlformats-officedocument.wordprocessingml.template"
			|| o.files[i].type == "application/vnd.ms-word.document.macroEnabled.12" || o.files[i].type == "application/vnd.sun.xml.writer" || o.files[i].type == "application/vnd.openxmlformats-officedocument.wordprocessingml.document"
			
			) { %}
            <span class="extdoc"></span>
           
            {% mimeok=1 } %}
			
			{% if (o.files[i].type == "application/vnd.ms-powerpoint" || o.files[i].type == "application/mspowerpoint" || o.files[i].type == "application/ms-powerpoint" || o.files[i].type == "application/mspowerpnt" || o.files[i].type == "application/vnd-mspowerpoint" || o.files[i].type == "application/powerpoint" || o.files[i].type == "application/x-powerpoint" || o.files[i].type == "application/x-m" || o.files[i].type == "application/x-powerpoint" || o.files[i].type == "application/x-mspowerpoint"  || o.files[i].type == "application/x-dos_ms_powerpnt"  || o.files[i].type == "application/pot"  || o.files[i].type == "application/x-soffic" || o.files[i].type == "application/vnd.openxmlformats-officedocument.presentationml.template"  || o.files[i].type == "application/vnd.ms-powerpoint.slideshow.macroEnabled.12" || o.files[i].type == "application/vnd.openxmlformats-officedocument.presentationml.slideshow" || o.files[i].type == "application/vnd.ms-powerpoint.presentation.macroEnabled.12" || o.files[i].type == "application/vnd.openxmlformats-officedocument.presentationml.presentation" || o.files[i].type == "application/vnd.oasis.opendocument.presentation" || o.files[i].type == "application/x-vnd.oasis.opendocument.presentation" || o.files[i].type == "application/vnd.sun.xml.impress") { %}
            <span class="extppt"></span>
            {% mimeok=1} %}
			
			
			{% if (o.files[i].type == "text/plain" || o.files[i].type == "application/txt" || o.files[i].type == "browser/internal" || o.files[i].type == "text/anytext" || o.files[i].type == "widetext/plain" || o.files[i].type == "widetext/paragraph" ) { %}
            <span class="exttxt"></span>
            {% mimeok=1} %}
			
			
			{% if (o.files[i].type == "application/vnd.ms-excel" || o.files[i].type == "application/msexcel" || o.files[i].type == "application/x-msexcel" || o.files[i].type == "application/x-ms-excel" || o.files[i].type == "application/vnd.ms-excel" || o.files[i].type == "application/x-m" || o.files[i].type == "application/x-excel" || o.files[i].type == "application/x-dos_ms_excel"  || o.files[i].type == "application/xls" || o.files[i].type == "application/excel"  || o.files[i].type == "application/xlt" || o.files[i].type == "application/msexcel"  || o.files[i].type == "application/x-msexcel" || o.files[i].type == "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" || o.files[i].type == "application/vnd.oasis.opendocument.spreadsheet" || o.files[i].type == "application/x-vnd.oasis.opendocument.spreadsheet" || o.files[i].type == "application/vnd.sun.xml.calc" || o.files[i].type == "text/comma-separated-values" || o.files[i].type == "text/csv" || o.files[i].type == "application/csv" || o.files[i].type == "application/vnd.msexcel"
			
			
			) { %}
					
            <span class="extxls"></span>
            {% mimeok=1} %}
			
			{% if (o.files[i].type == "text/xml" || o.files[i].type == "application/xml" || o.files[i].type == "application/x-xml" ) { %}
					
            <span class="extxml"></span>
            {% mimeok=1} %}
			
			
			{% if (o.files[i].type == "text/html" || o.files[i].type == "application/xhtml+xml"  ) { %}
					
            <span class="exthtm"></span>
            {% mimeok=1} %}
			
			{% if (o.files[i].type == "application/vnd.mif" || o.files[i].type == "application/x-framemaker" || o.files[i].type == "application/x-maker"|| o.files[i].type == "application/x-mif"  ) { %}
					
            <span class="extmif"></span>
            {% mimeok=1} %}
			
			 {% if (/idml/.test( o.files[i].name.split('.').pop() ) ) { %}
            <span class="extidd"></span>
            {% mimeok=1} %}
			
			{% if (o.files[i].type == "application/quarkxpress" || o.files[i].type == "application/x-quark-express" ||  /xtg/.test( o.files[i].name.split('.').pop() )) { %}
					
            <span class="extqxp"></span>
            {% mimeok=1} %}
			
		
			
			 {% if (/ttx/.test( o.files[i].name.split('.').pop() ) ) { %}
            <span class="extttx"></span>
            {% mimeok=1} %}
			
			 {% if (/xliff/.test( o.files[i].name.split('.').pop() ) ) { %}
            <span class="extxif"></span>
            {% mimeok=1} %}
			
			 {% if (/xlf/.test( o.files[i].name.split('.').pop() ) ) { %}
            <span class="extxlf"></span>
            {% mimeok=1} %}
			
			 {% if (/rc/.test( o.files[i].name.split('.').pop() ) ) { %}
            <span class="extrcc"></span>
            {% mimeok=1} %}
			
			{% if (/resx/.test( o.files[i].name.split('.').pop() ) ) { %}
            <span class="extres"></span>
            {% mimeok=1} %}
			
			{% if (/sgml/.test( o.files[i].name.split('.').pop() ) ) { %}
            <span class="extsgl"></span>
            {% mimeok=1} %}
			
			{% if (/sgm/.test( o.files[i].name.split('.').pop() ) ) { %}
            <span class="extsgm"></span>
            {% mimeok=1} %}
			
			{% if (/properties/.test( o.files[i].name.split('.').pop() ) ) { %}
            <span class="extpro"></span>
            {% mimeok=1} %}
			
			 {% if (/tmx/.test( o.files[i].name.split('.').pop() ) ) { %}
            <span class="exttmx"></span>
            {% mimeok=1} %}
			
				
			
		
			
			{% if (o.files[i].type == "application/pdf" || o.files[i].type == "application/x-pdf" || o.files[i].type == "application/acrobat" || o.files[i].type == "applications/vnd.pdf" || o.files[i].type == "text/pdf" || o.files[i].type == "text/x-pdf") { %}
			
            <span class="extpdf"></span>
            {% mimeok=1} %}
			
			{% if ((typeof(mimeok)=='undefined') || mimeok==0) { console.log(o.files[i].type); %}
			 <span class="extxif"></span>
            {% } %}
			
			
        </td>
        <td class="name">{%=file.name%}</td>
        <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
        <td colspan="2"></td>
        {% } %}
        <td class="delete">
            <button class="btn btn-danger" data-type="{%=file.delete_type%}" data-url="{%=file.delete_url%}">
                <i class="icon-trash icon-white"></i>
                <span>{%=locale.fileupload.destroy%}</span>
            </button>

        </td>
    </tr>


    {% } %}
</script>

<script tal:condition="not:volume_analysis_enabled" id="job-links-list" type="text/x-tmpl">
    <!-- The template to display links for every language in the job when multi-language selected and no analysis page is available-->
    <table class="tablestats" width="100%" border="0" cellspacing="0" cellpadding="0" id="info-login">
        <thead>
        <tr>
            <th class="job-detail">
                <a tal:attributes="href string:${basepath}manage/?new=1">Login</a> to add the jobs to your management
                panel.
            </th>
        </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
    <table class="tablestats" width="100%" border="0" cellspacing="0" cellpadding="0" id="project-{%=o.id_project%}">
        <thead>
        <tr>
            <th class="job-detail">Jobs</th>
        </tr>
        </thead>
        <tbody>
        {% for (var i=0, file; file=o.files[i]; i++) { %}
        <tr class="row">
            <td class="job-detail">
                	<span class="urls">
                        <div class="langs">{%=o.srcLangHumanReadable%}&nbsp;&gt;&nbsp;{%=o.trgLangHumanReadable[i]%}
                        </div>
                		<a class="url" target="_blank" href="{%=file.href%}">{%=file.href%}</a>
	        	    </span>
            </td>
        </tr>
        {% } %}
        </tbody>
    </table>
</script>

<script src="${basepath}public/js/lib/jquery-ui-1.8.20.custom.min.js"></script>

<!-- The Templates plugin is included to render the upload/download listings -->
<script src="${basepath}public/js/lib/fileupload/tmpl.min.js"></script>

<!-- The Load Image plugin is included for the preview images and image resizing functionality -->
<script src="${basepath}public/js/lib/fileupload/load-image.min.js"></script>

<!-- The Canvas to Blob plugin is included for image resizing functionality -->
<script src="${basepath}public/js/lib/fileupload/canvas-to-blob.min.js"></script>

<!-- jQuery Image Gallery -->
<script src="${basepath}public/js/lib/fileupload/jquery.image-gallery.min.js"></script>

<!-- The Iframe Transport is required for browsers without support for XHR file uploads -->
<script src="${basepath}public/js/lib/fileupload/jquery.iframe-transport.js"></script>
<!-- The basic File Upload plugin -->
<script src="${basepath}public/js/lib/fileupload/jquery.fileupload.js"></script>
<!-- The File Upload file processing plugin -->
<script src="${basepath}public/js/lib/fileupload/jquery.fileupload-fp.js"></script>
<!-- The File Upload user interface plugin -->
<script src="${basepath}public/js/lib/fileupload/jquery.fileupload-ui.js"></script>
<!-- The File Upload jQuery UI plugin -->
<script src="${basepath}public/js/lib/fileupload/jquery.fileupload-jui.js"></script>
<!-- The localization script -->
<script src="${basepath}public/js/lib/fileupload/locale.js"></script>
<!-- The main application script -->
<script src="${basepath}public/js/lib/fileupload/main.js"></script>
<!-- The XDomainRequest Transport is included for cross-domain file deletion for IE8+ -->
<!--[if gte IE 8]>
<script src="js/cors/jquery.xdr-transport.js"></script><![endif]-->

<script src="${basepath}public/js/lib/jquery.cookie.js"></script>
<script src="${basepath}public/js/lib/jquery.colorbox-min.js"></script>

<script src="${basepath}public/js/new-project.js"></script>
<!--
        <div style='display:none'>
            <div id='inline_content' style='padding:10px; background:#fff;'></div>
        </div>
-->


<div class="modal supported-formats" data-type="view">
    <div class="popup-outer closeClickingOutside"></div>
    <div class="popup">
        <a href="#" class="x-popup"></a>
        <h1>Supported file formats</h1>
        <div class="popup-box">
            <div tal:define="supported php:array()" tal:repeat="supported supported_file_types_array" class="format-box">
                <h3 tal:content="repeat/supported/key"></h3>
                <ul tal:define="ext php:array()" tal:repeat="ext supported">
                    <li tal:define="item php:array()" tal:repeat="item ext" tal:content="item">
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>





<div class="modal popup-languages" data-type="view">
    <div class="popup-outer"></div>
    <div class="popup">
        <a href="#" class="x-popup"></a>

        <h1>
            <a id="chooseMultilang" href="#" class="btn-ok right">Continue</a>
            <a id="cancelMultilang" href="#" class="btn-cancel right">Cancel</a>
            Choose Multiple Languages (<span class="number">1</span>)
            <a href="#" id="deselectMultilang">Deselect all</a>
        </h1>

        <div class="popup-box">
            <ul class="listlang">

                <tal:block tal:repeat="language target_languages">
                    <li tal:attributes="class language/top">
                        <input type="checkbox" tal:attributes="value language/code; id language/code"/>
                        <label tal:attributes="for language/name" tal:content="language/name" onClick="return false">---</label>
                    </li>
                </tal:block>

            </ul>
        </div>
    </div>
</div>


<footer>
    <div class="wrapper">

        <nav>
        <ul>
                        <li><a tal:attributes="href string:${basepath}manage/?new=1" >Manage</a></li>

                <li><a tal:attributes="href string:${basepath}api/docs">API</a></li>
				<li><a href="http://docs.matecat.com" target="_blank">Docs</a></li>
            </ul>
            
          

            <tal:block tal:condition="php: empty(logged_user)">
                <div id='welcomebox'>
                    <span>Anonymous</span> (<a id='loginlink' tal:attributes="href incomingUrl">login</a>)
                </div>
            </tal:block>

            <tal:block tal:condition="php: !empty(logged_user)">
                <div id='welcomebox'>
                    <span tal:content='logged_user'></span> (<a id='logoutlink' href='#'>logout</a>)
                </div>
            </tal:block>

        </nav>

    </div>
</footer>


<!-- inizio popup tm mgmt -->
<div class="modal popup-tm" data-type="view">
    <div class="popup-outer"></div>
    <div class="popup">
        <a href="#" class="x-popup"></a>

        <h1>
            Language Resources
        </h1>

        <div class="popup-box">



<div class="mgmt-panel mgmt-panel-tm">
	<div class="mgmt-wrapper">
    	<div class="mgmt-table-tm">
             <ul id="myTab" class="nav nav-tabs" role="tablist">
      <li class="active"><a href="#tm">TM Management</a></li>
      <li class=""><a href="#glossaries" class="mgmt-gl">Glossaries</a></li>
     
    </ul>
             <div class="mgmt-container">
          		<h3>Match source</h3>
                <div class="block">
                <label>MT</label>
                <select>
                <option>select</option>
                </select>
                </div>
                <div class="block">
                <label>Lookup</label>
                <input type="checkbox" />
                </div>
                <div class="clear"></div>
                <h3>Manage TM</h3>
                   <p class="pull-left">Drag & drop the entries to change their priority.</p><a class="btn-ok pull-right savebtn">Save</a>

                <table class="mgmt-tm" id="sort">
                    <thead>
                      <tr>
                      	<th class="text-center"  width="7%">Priority</th>
                        <th width="23%">Translation Memory</th>
                        <th width="20%">Private Key</th>
                        <th width="30%">Description</th>
                        <th width="10%">Lang Pair</th>
                        <th class="text-center"  width="5%">Lookup</th>
                        <th class="text-center" width="5%">Update</th>
                    </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="index text-center"><span class="number">1</span><span class="nonumber">disabled</span></td>
                            <td><a href="#">Google Drive</a></td>
                            <td>90231291i201i</td>
                            <td>Inf tech</td>
                            <td><span class="mgmt-source">en-US</span> - <span class="mgmt-target">es-ES</span></td>
                            <td  class="text-center" ><input  class="enable checkbox" type="checkbox" checked="checked" /></td>
                            <td  class="text-center" ><input  class="enable checkbox" type="checkbox" /></td>
                        </tr>
                        <tr>
                            <td class="text-center index"><span class="number">2</span><span class="nonumber">disabled</span></td>
                            <td><a href="#">Google Gmail</a></td>
                            <td>2932938238</td>
                            <td>Inf tech</td>
                            <td><span class="mgmt-source">it-IT</span> - <span class="mgmt-target">es-ES</span></td>
                             <td  class="text-center" ><input  class="enable checkbox" type="checkbox"  checked="checked" /></td>
                             <td  class="text-center" ><input class="enable checkbox"  type="checkbox" /></td>
                        </tr>
                        <tr>
                            <td class="text-center index"><span class="number">3</span><span class="nonumber">disabled</span></td>
                            <td><a href="#">Europarl</a></td>
                            <td>192819819281981</td>
                            <td>Legal (amendments)</td>
                            <td><span class="mgmt-source">es-ES</span> - <span class="mgmt-target">fr-FR</span></td>
                             <td  class="text-center" ><input  class="enable checkbox" type="checkbox"  checked="checked" /></td>
                             <td  class="text-center" ><input  class="enable checkbox" type="checkbox" /></td>
                        </tr>
                        <tr class="disabled">
                            <td class="text-center"><span class="number">4</span><span class="nonumber">disabled</span></td>
                            <td>Google Drive 21</td>
                            <td>xxxxxxxxxxx</td>
                            <td>Inf tech</td>
                            <td><span class="mgmt-source">en-US</span> - <span class="mgmt-target">es-ES</span></td>
                            <td  class="text-center" ><input class="enable checkbox" type="checkbox" /></td>
                             <td  class="text-center" ><input class="enable checkbox" type="checkbox" /></td>
                        </tr>
                          </tbody>
                       </table>
                       <br />
                            <a href="#" class="btn-ok clear pull-right add-tm">Add a TM</a>
                       
                            <div class="addrow-tm">
              <h3>Add a TM</h3>
                 <p>Short description here.</p>
              <div class="block">
              <input class="mgmt-input" type="text" width="20" id="name" onfocus="this.value='';"  value="Enter a name" />
              </div>
              <div class="block">
                  <input class="mgmt-input" type="text" id="key" onfocus="this.value='';"  value="Create new private key" />
                  <a class="btn-ok pull-right">Create</a>
               </div>
               <div class="block clear">
               <input class="mgmt-input" type="text" id="description" onfocus="this.value='';"  value="Enter a short description" />
               </div>
                <div class="block">
<label class="fileupload">Select a TMX </label><input type="file" />
</div>
				<input type="button" value="Add a TM" id="add" class="pull-right add-tm-ok btn-ok" onclick="Javascript:addRow()" />
                       </div>
            </div>
		</div>
    </div>
</div>
<!-- fine tm mgmt -->
<!-- inizio glossary mgmt -->
<div class="mgmt-panel mgmt-panel-gl">
	<div class="mgmt-wrapper">
    	<div class="mgmt-table-gl">
  <ul id="myTab" class="nav nav-tabs" role="tablist">
      <li ><a href="#tm"  class="mgmt-tm">TM Management</a></li>
      <li class="active"><a href="#glossaries">Glossaries</a></li>
     
    </ul>             
    
    <div class="mgmt-container">
   <h3>Manage Glossaries</h3>
   <p>Drag & drop the entries to change their priority.</p>
                <table class="mgmt-gl" id="sort">
                    <thead>
                      <tr>
                      	<th class="text-center"  width="7%">Priority</th>
                        <th width="23%">Glossary name</th>
                        <th width="20%">Private Key</th>
                        <th width="30%">Description</th>
                        <th width="10%">Lang Pair</th>
                        <th class="text-center"  width="5%">Lookup</th>
                        <th class="text-center" width="5%">Update</th>
                    </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="index text-center">1</td>
                            <td><a href="#">Google Drive</a></td>
                            <td>90231291i201i</td>
                            <td>Inf tech</td>
                            <td><span class="mgmt-source">en-US</span> - <span class="mgmt-target">es-ES</span></td>
                            <td  class="text-center" ><input type="checkbox" /></td>
                            <td  class="text-center" ><input type="checkbox" /></td>
                        </tr>
                        <tr>
                            <td class="text-center index">2</td>
                            <td><a href="#">Google Gmail</a></td>
                            <td>2932938238</td>
                            <td>Inf tech</td>
                            <td><span class="mgmt-source">it-IT</span> - <span class="mgmt-target">es-ES</span></td>
                             <td  class="text-center" ><input type="checkbox" /></td>
                             <td  class="text-center" ><input type="checkbox" /></td>
                        </tr>
                        <tr>
                            <td class="text-center index">3</td>
                            <td><a href="#">Europarl</a></td>
                            <td>192819819281981</td>
                            <td>Legal (amendments)</td>
                            <td><span class="mgmt-source">es-ES</span> - <span class="mgmt-target">fr-FR</span></td>
                             <td  class="text-center" ><input type="checkbox" /></td>
                             <td  class="text-center" ><input type="checkbox" /></td>
                        </tr>
                        <tr>
                            <td class="text-center index">4</td>
                            <td>Google Drive 21</td>
                            <td>xxxxxxxxxxx</td>
                            <td>Inf tech</td>
                            <td><span class="mgmt-source">en-US</span> - <span class="mgmt-target">es-ES</span></td>
                            <td  class="text-center" ><input type="checkbox" /></td>
                             <td  class="text-center" ><input type="checkbox" /></td>
                        </tr>
                          </tbody>
                       </table>
                       <br />
                             <a class="pull-right add-gl btn-ok" href="#"><span>Import glossary</span></a>

        </div>
    
    
    	<div class="addrow-gl">
        <h3>Import glossary</h3>
          <p>Upload a CSV file with source and target terms and comments separated by a semicolon. Example: source term; target term; comment.</p>
            <div>
           
            <div class="block">
                             <select>
                             	<option>Source language</option>
                             </select>
                    </div>
                    <div class="block">
                              <select>
                             	<option>Target language</option>
                             </select>
                    </div>
               <div class="block">
                             <input type="textarea" class="mgmt-input" value="Enter a short description" />
                    </div>
                <div class="block ">
                    <input class="mgmt-input" id="key" type="text" value="Enter your private key" />
                     <a class="btn-ok pull-right">Create</a>
                  </div>
               
                    <div class="block clear">
                                <label>Select a file to upload (.csv)</label>
                            <input type="file"  />
                     </div>
                     <a class="btn-ok pull-right btn-confirm">Upload</a>
            </div>
            </div>
		</div>
    </div>
</div>
</div>
</div>
</div>
<!-- fine popup glossary mgmt -->

<div class="mgmt-popup-outer closeClickingOutside popup-outer"></div>

<script src="${basepath}public/js/lib/snapengage.js"></script>

<script type="text/javascript">



// script per il funzionamento del dropdown menu del profilo utente 


			function DropDown(el) {
				this.dd = el;
				this.initEvents();
			}
			DropDown.prototype = {
				initEvents : function() {
					var obj = this;

					obj.dd.on('click', function(event){
						$(this).toggleClass('active');
						event.stopPropagation();
					});	
				}
			}

			$(function() {

				var dd = new DropDown( $('#dd') );

				$(document).click(function() {
					// all dropdowns
					$('.wrapper-dropdown-5').removeClass('active');
				});

			});
			

$( ".memory-mgmt" ).click(function() {
  $( ".popup-tm" ).show();
});

$( ".mgmt-tm" ).click(function() {
  $( ".mgmt-panel-gl" ).hide();
  $( ".mgmt-panel-tm" ).show();
      $( "table.mgmt-tm" ).show();
  });
  
  $( ".mgmt-gl" ).click(function() {
  $( ".mgmt-panel-tm" ).hide();
    $( "table.mgmt-tm" ).hide();
  $( ".mgmt-panel-gl" ).show();

  });
  
  $( ".add-tm" ).click(function() {
  $(this).hide();
  $( ".addrow-tm" ).show();
  });
  
  
    $( ".add-gl" ).click(function() {
  $(this).hide();
  $( ".addrow-gl" ).show();
  });
  

$( "#sign-in" ).click(function() {
  $( ".loginpopup" ).show();
});

    	$('#sort td:first').addClass('index');



// plugin per rendere sortable le tabelle 
// sorgente: http://www.foliotek.com/devblog/make-table-rows-sortable-using-jquery-ui-sortable/

var fixHelperModified = function(e, tr) {
    var $originals = tr.children();
    var $helper = tr.clone();
    $helper.children().each(function(index) {
        $(this).width($originals.eq(index).width())
    });
    return $helper;
},
    updateIndex = function(e, ui) {
        $('.index', ui.item.parent()).each(function (i) {
            $(this).html(i + 1);
        });
    };

$("#sort tbody").sortable({
    helper: fixHelperModified,
    stop: updateIndex
}).disableSelection();

$('.enable').click(function() {
  $(this).closest('tr td:first-child').toggleClass('index');
   	   	$(this).closest("tr").toggleClass('disabled');
		$('tr.selected .number').show();
	 	$('tr.selected .nonumber').hide();
});


$('.savebtn').click(function() {
	$('.resource').show();
	
    $('input.checkbox').each(function(){
        if ($(this).is(':checked')) {
           	$(this).parent('tr').addClass('selected');
        } else {
         	$(this).parent('tr').addClass('disabled');
        }
    });
});
</script>

</body>

</html>
